if (self.CavalryLogger) { CavalryLogger.start_js(["QTkhJ"]); }

__d("LiveVideoBroadcastErrorCreateSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"LiveVideoMutationErrorSubscribeData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"live_video_mutation_error_subscribe",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"LiveVideoMutationErrorSubscribeResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"live_video_error",storageKey:null,args:null,concreteType:"LiveVideoError",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"creation_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"error_code",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"error_message",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"error_type",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"LiveVideoBroadcastErrorCreateSubscription",type:"Subscription",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"LiveVideoBroadcastErrorCreateSubscription",argumentDefinitions:a,selections:b},params:{operationKind:"subscription",name:"LiveVideoBroadcastErrorCreateSubscription",id:"2653532621324181",text:null,metadata:{subscriptionName:"live_video_mutation_error_subscribe"}}}}();e.exports=a}),null);
__d("SpeedtestResultsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:SpeedtestResultsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:SpeedtestResultsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SpeedtestResultsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAvgLatency=function(a){this.$1.avg_latency=a;return this};c.setAvgMbps=function(a){this.$1.avg_mbps=a;return this};c.setCdnHostname=function(a){this.$1.cdn_hostname=a;return this};c.setNumConcurrentRequests=function(a){this.$1.num_concurrent_requests=a;return this};c.setNumRequests=function(a){this.$1.num_requests=a;return this};c.setRequestSize=function(a){this.$1.request_size=a;return this};c.setTestDuration=function(a){this.$1.test_duration=a;return this};c.setTestType=function(a){this.$1.test_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={avg_latency:!0,avg_mbps:!0,cdn_hostname:!0,num_concurrent_requests:!0,num_requests:!0,request_size:!0,test_duration:!0,test_type:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("PublicLinkedList",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.headNode=null,this.tailNode=null,this.length=0}var b=a.prototype;b.first=function(){return this.headNode};b.shift=function(){if(!this.headNode)return null;var a=this.headNode;this.headNode=a.nextNode;this.headNode?this.headNode.prevNode=null:this.tailNode=null;this.length--;return a};b.unshift=function(a){a.nextNode=this.headNode;this.headNode&&(this.headNode.prevNode=a);this.headNode=a;this.tailNode||(this.tailNode=a);this.length++;return a};b.insertAfter=function(a,b){if(!a)return this.unshift(b);b.prevNode=a;b.nextNode=a.nextNode;a.nextNode?a.nextNode.prevNode=b:this.tailNode=b;a.nextNode=b;this.length++;return b};b.last=function(){return this.tailNode};b.pop=function(){if(!this.tailNode)return null;var a=this.tailNode;this.tailNode=a.prevNode;this.tailNode?this.tailNode.nextNode=null:this.headNode=null;this.length--;return a};b.push=function(a){a.prevNode=this.tailNode;this.tailNode&&(this.tailNode.nextNode=a);this.tailNode=a;this.headNode||(this.headNode=a);this.length++;return a};b.insertBefore=function(a,b){if(!a)return this.push(b);b.prevNode=a.prevNode;b.nextNode=a;a.prevNode?a.prevNode.nextNode=b:this.headNode=b;a.prevNode=b;this.length++;return b};b.remove=function(a){a.prevNode?a.prevNode.nextNode=a.nextNode:this.headNode=a.nextNode,a.nextNode?a.nextNode.prevNode=a.prevNode:this.tailNode=a.prevNode,a.prevNode=a.nextNode=null,this.length--};b.reverse=function(){var a=this.tailNode=this.headNode,b,c;while(a)c=a.nextNode,a.prevNode=c,a.nextNode=b,b=a,a=c;this.headNode=b};b.forEach=function(a,b){for(var c=this.headNode;c;c=c.nextNode)a.call(b,c,this)};b.some=function(a,b){for(var c=this.headNode;c;c=c.nextNode)if(a.call(b,c,this))return!0;return!1};b.every=function(a,b){for(var c=this.headNode;c;c=c.nextNode)if(!a.call(b,c,this))return!1;return!0};b.filter=function(a,b){var c=new Object.getPrototypeOf(this).constructor();for(var d=this.headNode;d;d=d.nextNode)a.call(b,d,this)&&c.push(d);return c};b.toArray=function(){var a=[];for(var b=this.headNode;b;b=b.nextNode)a.push(b);return a};a.fromArray=function(a){var b=new this();for(var c=0;c<a.length;c++)b.push(a[c]);return b};return a}();b=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.first=function(){return this.headNode?this.headNode.data:null};c.shift=function(){var b=a.prototype.shift.call(this);return b&&b.data};c.unshift=function(b){var c=new g();c.data=b;return a.prototype.unshift.call(this,c)};c.insertAfter=function(b,c){var d=new g();d.data=c;return a.prototype.insertAfter.call(this,b,d)};c.last=function(){return this.tailNode?this.tailNode.data:null};c.pop=function(){var b=a.prototype.pop.call(this);return b&&b.data};c.push=function(b){var c=new g();c.data=b;return a.prototype.push.call(this,c)};c.insertBefore=function(b,c){var d=new g();d.data=c;return a.prototype.insertBefore.call(this,b,d)};c.remove=function(b){a.prototype.remove.call(this,b),b.data=null};c.forEach=function(b,c){return a.prototype.forEach.call(this,function(a,d){return b.call(c,a.data,a,d)})};c.some=function(b,c){return a.prototype.some.call(this,function(a,d){return b.call(c,a.data,a,d)})};c.every=function(b,c){return a.prototype.every.call(this,function(a,d){return b.call(c,a.data,a,d)})};c.filter=function(b,c){return a.prototype.filter.call(this,function(a,d){return b.call(c,a.data,a,d)})};c.map=function(a,b){var c=new Object.getPrototypeOf(this).constructor();for(var d=this.headNode;d;d=d.nextNode)c.push(a.call(b,d.data,d,this));return c};c.toArray=function(){return a.prototype.toArray.call(this).map(function(a){return a.data})};return b}(a);a.WithData=b;var g=function(){function a(){this.prevNode=this.nextNode=null}var b=a.prototype;b.next=function(){return this.nextNode};b.prev=function(){return this.prevNode};return a}();a.Node=g;e.exports=a}),null);
__d("QueueDataStructure",["PublicLinkedList"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=new(b("PublicLinkedList").WithData)(),this.$2=0}var c=a.prototype;c.enqueue=function(a){this.$1.push(a),this.$2++};c.enqueueList=function(a){var b=this;a.forEach(function(a){b.enqueue(a)})};c.dequeue=function(){if(this.isEmpty())return null;var a=this.$1.shift();this.$2--;return a};c.peek=function(){return this.isEmpty()?null:this.$1.headNode.data};c.getLength=function(){return this.$2};c.isEmpty=function(){return this.$2===0};return a}();e.exports=a}),null);
__d("ReactComposerLiveBroadcastPreviewActions",["ReactComposerDispatcher","ReactComposerLiveBroadcastPreviewActionType","ReactComposerLiveBroadcastPreviewStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerLiveBroadcastPreviewStore");a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.setBroadcastConfig=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_BROADCAST_CONFIG,config:c})};c.setContentTags=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_CONTENT_TAGS,contentTags:c})};c.setAttributionTag=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_ATTRIBUTION_TAG,attributionTag:c})};c.setHasVideoStream=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_HAS_VIDEO_STREAM,hasVideoStream:c})};c.setSelectedTab=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_SELECTED_TAB,key:c})};c.setTitle=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_TITLE,title:c})};c.setShouldBlockComments=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_SHOULD_BLOCK_COMMENTS,shouldBlockComments:c})};c.setCommentModes=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_COMMENT_MODES,commentModes:c})};c.setCopyrighted=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHTED,copyrighted:c})};c.setEmbeddable=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_EMBEDDABLE,embeddable:c})};c.setDisturbing=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_DISTURBING,disturbing:c})};c.setVodDisabled=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_VOD_DISABLED,vodDisabled:c})};c.setCopyrightContentCategory=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_CONTENT_CATEGORY,selectedCategory:c})};c.setDidClickSave=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_DID_CLICK_SAVE,didClickSave:c})};c.setCopyrightMonitoringType=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_MONITORING_TYPE,copyrightMonitoringType:c})};c.setCopyrightRuleID=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_RULE_ID,copyrightRuleID:c})};c.setCopyrightWhitelistedFBUsers=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_WHITELISTED_FB_USERS,copyrightWhitelistedFBUsers:c})};c.setCopyrightWhitelistedIGUserNames=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_WHITELISTED_IG_USERNAMES,copyrightWhitelistedIGUserNames:c})};c.setCopyrightOwnershipCountries=function(a,c,d){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_OWNERSHIP_COUNTRIES,copyrightOwnershipCountries:c,areCopyrightCountriesIncluded:d})};c.setPostFinished=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_POST_FINISHED,postFinished:c})};c.setBroadcastType=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_BROADCAST_TYPE,ambientChecked:c})};c.setManualGoLive=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_MANUAL_GO_LIVE,isManualGoLive:c})};c.setEpisodeData=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveBroadcastPreviewActionType").SET_EPISODE_DATA,episodeData:c})};return a}();e.exports=new a()}),null);
__d("LiveVideoBroadcastErrorCreateSubscription",["ChannelManager","RelayModern","RelayRuntime","LiveVideoBroadcastErrorCreateSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("RelayModern").graphql;var h=b("RelayModern").requestSubscription,i=b("RelayRuntime").ConnectionHandler,j=g!==void 0?g:g=b("LiveVideoBroadcastErrorCreateSubscription.graphql"),k=["LiveVideoBroadcastErrorLogs_errors","LiveVideoBroadcastHealthTray_errors"];b("ChannelManager").startChannelManager();function a(a,b,c){__p&&__p();var d={input:b},e=function(a,c){__p&&__p();var d=b.video_id;d=a.get(d);if(d==null)return;d=d.getLinkedRecord("input_streams");if(d==null)return;d=d.getLinkedRecords("nodes");if(d==null||d.length<1)return;var e=d[0];if(e==null)return;k.forEach(function(b){__p&&__p();var d;b=i.getConnection(e,b);if(b==null)return;d=(d=c.live_video_mutation_error_subscribe)==null?void 0:(d=d.live_video_error)==null?void 0:d.id;if(d==null)return;d=a.get(d);if(d==null)return;var f=parseInt(b.getValue("count"),10);b.setValue(f+1,"count");f=i.createEdge(a,b,d,"LiveVideoErrorsEdge");i.insertEdgeAfter(b,f)})};return h(a,{subscription:j,variables:d,updater:e,onCompleted:c==null?void 0:c.onCompleted,onError:c==null?void 0:c.onError,onNext:c==null?void 0:c.onNext})}e.exports={subscribe:a}}),null);
__d("MediaRecorder",[],(function(a,b,c,d,e,f){e.exports=window.MediaRecorder}),null);
__d("LiveVideoLiveTraceBroadcasterLogger",["CurrentUser","LiveTraceWwwVideoPlayerFalcoEvent","UserAgentData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="BROADCASTER";a=function(){__p&&__p();function a(){}var c=a.prototype;c.logCreateEvent=function(a,c,d){c={u:b("CurrentUser").getID(),appID:c.toString(),type:d};b("UserAgentData").browserName!=null&&(c.browser=b("UserAgentData").browserName);b("UserAgentData").browserFullVersion!=null&&(c.browserVer=b("UserAgentData").browserFullVersion);this.$1("CREATE",a,0,"","INFO",c)};c.logBeginEvent=function(a){var b={};this.$1("BEGIN",a,0,"","INFO",b)};c.logEndEvent=function(a){var b={};this.$1("END",a,0,"","INFO",b)};c.logErrorEvent=function(a,b){this.$1("ERROR",a,0,"","ERROR",b)};c.$1=function(a,c,d,e,f,h){var i=Date.now();b("LiveTraceWwwVideoPlayerFalcoEvent").log(function(){return{stream_id:c,stream_type:0,event_name:a,event_severity:f,event_creation_time:i,source:g,trace_id:d,parent_source:e,metadata:h}})};return a}();e.exports=new a()}),null);
__d("XLiveComposerPrivacySelectorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/broadcast/audienceSelector/",{video_id:{type:"FBID"},target_id:{type:"FBID"}})}),null);
__d("XLiveVideoBroadcastHandleScheduledLiveController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_broadcast/handle_schedule/",{broadcast_id:{type:"FBID"},schedule_custom_profile_image_focus:{type:"StringToFloatMap"},schedule_feed_background_image_focus:{type:"StringToFloatMap"},planned_start_time:{type:"Int"},enable_manual_mode:{type:"Bool",defaultValue:!1}})}),null);
__d("LiveVideoBroadcastAPIBroadcastStore",["fbt","ActorURI","Arbiter","AsyncRequest","Bootloader","ErrorDialog","FluxMapStore","Form","GraphAPI","LiveVideoBroadcastActions","LiveVideoBroadcastAPIActions","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastConstants","LiveVideoBroadcastDispatcher","LiveVideoBroadcastErrorCreateSubscription","LiveVideoBroadcastIDStore","LiveVideoBroadcastUIStore","LiveVideoBroadcastUtils","SkywalkerManager","XLiveComposerPrivacySelectorController","XLiveVideoBroadcastHandleScheduledLiveController","immutable","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(a=b("LiveVideoBroadcastConstants")).ACTIONS,i=a.ENCODER_TYPE,j=a.INPUT_SOURCE,k=a.STREAM_VALIDATION_STATUS,l=b("LiveVideoBroadcastErrorCreateSubscription").subscribe;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({apiLivePreviewPlaying:!1,areCountriesIncluded:!1,copyrightWhitelistedFBUsers:[],copyrightWhitelistedIGUserNames:[],errorCount:null,is360Video:!1,is360Audio:!1,isContentProtectionEnabled:!1,isSingleFisheye:!1,singleFisheyeFOV:0,sphericalConfigSelectorValue:null,isContinuous:!1,isCopyrighted:!1,isEmbeddable:!0,isScheduledManualMode:!1,isUpdateRequestPending:!1,ownershipCountries:[],scheduleStartTime:null,shouldExpireAfterGoLive:!1,shouldShowGraphicContentWarning:!1,showEventLogDialog:!1,selectedInputStreamIndex:0,streamURLs:null,usePersistentStreamKeyByDefault:null,isRehearsal:!1,allowUnsecureRTMP:!1,streamValidationStatus:k.IN_PROGRESS,shouldShowLiveProducerUpsellNux:null})};d.reduce=function(a,c){__p&&__p();switch(c.type){case h.START_BROADCAST_SUCCESS:b("Arbiter").inform("BroadcastDialog/liveStarted",{broadcastID:this.get("apiBroadcastID")});break;case h.CLEANUP:a=this.getInitialState();this.$LiveVideoBroadcastAPIBroadcastStore3();break;case h.API_BROADCAST_CREATED:a=a.set("apiBroadcastID",c.id);a=a.set("streamURLs",c.streamURLs);a=a.set("apiVideoID",c.videoID);a=a.set("apiEmbedHTML",c.apiEmbedHTML);a=a.set("apiLivePreviewPlaying",!1);a=a.set("errorCount",0);a=a.set("attributionAppID",c.attributionAppID);a=a.set("isRehearsal",c.isRehearsal);a=a.set("allowUnsecureRTMP",c.allowUnsecureRTMP);this.$LiveVideoBroadcastAPIBroadcastStore4(c.id);this.$LiveVideoBroadcastAPIBroadcastStore5(c.videoID);this.$LiveVideoBroadcastAPIBroadcastStore6(c.actorID,c.videoID,c.targetID);break;case h.BROADCAST_ERROR_RECEIVED:a=a.set("errorCount",this.get("errorCount")+1);break;case h.API_BROADCAST_LIVE_PREVIEW_PLAYING:a=a.set("apiLivePreviewPlaying",c.livePreviewPlaying);break;case h.ADD_INPUT_STREAM:var d=b("LiveVideoBroadcastUIStore").getState().toObject();d=d.accessToken;var f=b("LiveVideoBroadcastBroadcastStore").getState().toObject();f=f.actorID;d=b("LiveVideoBroadcastUtils").createInputStream(d,a.get("apiBroadcastID"),f);b("promiseDone")(d,function(a){b("LiveVideoBroadcastAPIActions").updateBackupInputStream(a.stream_url,a.secure_stream_url)});break;case h.FINISH_BROADCAST_REQUEST:this.$LiveVideoBroadcastAPIBroadcastStore7();break;case h.DELETE_API_REPLAY_VIDEO:this.$LiveVideoBroadcastAPIBroadcastStore8();break;case h.SET_API_BROADCAST_PRIVACY_SELECTOR:a=a.set("apiComposerPrivacySelector",c.apiComposerPrivacySelector);break;case h.SET_TARGET:case h.CLEAR_API_BROADCAST_ID:a=a.set("apiBroadcastID",null);a=a.set("apiLivePreviewPlaying",!1);a=a.set("errorCount",0);a=a.set("usePersistentStreamKeyByDefault",null);a=a.set("isContentProtectionEnabled",!1);break;case h.SET_CONTENT_PROTECTION_ENABLED:a=a.set("isContentProtectionEnabled",c.enabled);a=a.set("apiBroadcastID",null);break;case h.SET_IS_360_VIDEO:a=a.set("is360Video",c.value);a=a.set("is360Audio",!1);a=a.set("isSingleFisheye",!1);a=a.set("singleFisheyeFOV",180);a=a.set("sphericalConfigSelectorValue",null);a=a.set("apiBroadcastID",null);break;case h.SET_IS_360_AUDIO:a=a.set("is360Audio",c.value);c.value&&(a=a.set("isSingleFisheye",!1));a=a.set("apiBroadcastID",null);break;case h.SET_SCHEDULED_LIVE_DATA:c.isManualMode!=null&&(a=a.set("isScheduledManualMode",c.isManualMode));c.scheduleStartTime!=null&&(a=a.set("scheduleStartTime",c.scheduleStartTime));break;case h.SET_IS_SINGLE_FISHEYE:a=a.set("isSingleFisheye",c.value);a=a.set("singleFisheyeFOV",180);c.value&&(a=a.set("is360Audio",!1));a=a.set("apiBroadcastID",null);break;case h.SET_SINGLE_FISHEYE_FOV:a=a.set("singleFisheyeFOV",c.value);a=a.set("apiBroadcastID",null);break;case h.UPDATE_360_CONFIGURATION:a=a.set("sphericalConfigSelectorValue",c.value);c.value&&c.value.getAuxiliaryData().projection==="single_fish_eye"&&(a=a.set("singleFisheyeFOV",180),a=a.set("is360Audio",!1));a=a.set("apiBroadcastID",null);break;case h.SET_EMBEDDABLE:a=a.set("isEmbeddable",c.value);break;case h.SCHEDULED_LIVE_REQUEST:this.$LiveVideoBroadcastAPIBroadcastStore9(c.actorID,c.broadcastID,c.plannedStartTime,c.customProfileImage,c.customProfileImageFocus,c.feedBackgroundImage,c.feedBackgroundFocus,c.customAnnouncementThumbnail,c.enableManualMode,c.announcementPostMessage);break;case h.SET_SHOULD_EXPIRE_AFTER_GO_LIVE:a=a.set("shouldExpireAfterGoLive",c.value);break;case h.SET_SHOULD_SHOW_GRAPHIC_CONTENT_WARNING:a=a.set("shouldShowGraphicContentWarning",c.value);break;case h.SET_SHOW_EVENT_LOG_DIALOG:a=a.set("showEventLogDialog",c.value);break;case h.SET_CONTINUOUS:a=a.set("isContinuous",c.value);break;case h.SET_COPYRIGHTED:a=a.set("isCopyrighted",c.value);break;case h.SET_COPYRIGHT_MONITORING_TYPE:a=a.set("copyrightMonitoringType",c.value);break;case h.SET_COPYRIGHT_CONTENT_CATEGORY:a=a.set("selectedCategory",c.value);break;case h.SET_COPYRIGHT_OWNERSHIP_COUNTRIES:a=a.set("areCountriesIncluded",c.areCountriesIncluded);a=a.set("ownershipCountries",c.ownershipCountries);break;case h.SET_COPYRIGHT_RULE_ID:a=a.set("copyrightRuleID",c.value);break;case h.UPDATE_COPYRIGHT_WHITELISTED_FB_USERS:a=a.set("copyrightWhitelistedFBUsers",c.value);break;case h.UPDATE_COPYRIGHT_WHITELISTED_IG_USERNAMES:a=a.set("copyrightWhitelistedIGUserNames",c.value);break;case h.UPDATE_BACKUP_INPUT_STREAM:f=Object.assign({},a.get("streamURLs"));f.backupStreamURL=c.backupStreamURL;f.backupSecureStreamURL=c.backupSecureStreamURL;a=a.set("streamURLs",f);break;case h.API_GO_LIVE_CLICKED:a=a.set("isUpdateRequestPending",!0);break;case h.ERROR_STARTING_API_BROADCAST:a=a.set("isUpdateRequestPending",!1);break;case h.SET_IS_REHEARSAL:a=a.set("isRehearsal",c.value);a=a.set("apiBroadcastID",null);break;case h.UPDATE_UI_CONFIG:c.values.usePersistentStreamKeyByDefault!=void 0&&(a=a.set("usePersistentStreamKeyByDefault",c.values.usePersistentStreamKeyByDefault));c.values.broadcastType!=void 0&&(a=a.set("isContinuous",c.values.broadcastType===1));c.values.shouldExpireAfterGoLive!=void 0&&(a=a.set("shouldExpireAfterGoLive",c.values.shouldExpireAfterGoLive));c.values.shouldShowGraphicContentWarning!=void 0&&(a=a.set("shouldShowGraphicContentWarning",c.values.shouldShowGraphicContentWarning));c.values.isEmbeddable!=void 0&&(a=a.set("isEmbeddable",c.values.isEmbeddable));a=a.set("shouldShowLiveProducerUpsellNux",c.values.shouldShowLiveProducerUpsellNux===!0);break;case h.SET_SELECTED_ENCODER_TYPE:if(c.encoderType===i.STREAM_KEY){d=b("LiveVideoBroadcastUIStore").getState().toObject();f=d.accessToken;b("GraphAPI")("2.8",e.id).object("live_video",a.get("apiBroadcastID")).post({access_token:f,live_encoders:[]})}break;case h.SET_SELECTED_INPUT_STREAM_INDEX:a=a.set("selectedInputStreamIndex",c.value);break;case h.SET_STREAM_VALIDATION_STATUS:a=a.set("streamValidationStatus",c.value);break;default:break}return a};d.$LiveVideoBroadcastAPIBroadcastStore4=function(a){this.$LiveVideoBroadcastAPIBroadcastStore1&&this.$LiveVideoBroadcastAPIBroadcastStore1.unsubscribe(),this.$LiveVideoBroadcastAPIBroadcastStore1=b("SkywalkerManager").subscribe("video/broadcast/error/"+a,function(){return b("LiveVideoBroadcastAPIActions").broadcastErrorReceived()})};d.$LiveVideoBroadcastAPIBroadcastStore5=function(a){var c=this;this.$LiveVideoBroadcastAPIBroadcastStore3();b("Bootloader").loadModules(["RelayFBEnvironment"],function(d){c.$LiveVideoBroadcastAPIBroadcastStore2=l(d,{video_id:a},{onError:function(){b("LiveVideoBroadcastActions").errorCreatingBroadcastErrorLogSusbscription(),c.$LiveVideoBroadcastAPIBroadcastStore2=null}})},"LiveVideoBroadcastAPIBroadcastStore")};d.$LiveVideoBroadcastAPIBroadcastStore3=function(){if(this.$LiveVideoBroadcastAPIBroadcastStore2==null)return;this.$LiveVideoBroadcastAPIBroadcastStore2.dispose();this.$LiveVideoBroadcastAPIBroadcastStore2=null};d.$LiveVideoBroadcastAPIBroadcastStore9=function(a,c,d,e,f,g,h,i,j,k){k=b("XLiveVideoBroadcastHandleScheduledLiveController").getURIBuilder().getURI();k=b("ActorURI").create(k,a);a={broadcast_id:c,enable_manual_mode:!!j,planned_start_time:d,schedule_custom_profile_image_focus:f,schedule_feed_background_image_focus:h};c=this.$LiveVideoBroadcastAPIBroadcastStore10.bind(this,j);d=b("Form").createFormData(a);e!=null&&d.append("schedule_custom_profile_image",e);i!=null&&d.append("schedule_custom_background_image",i);g!=null&&d.append("schedule_feed_background_image",g);new(b("AsyncRequest"))(k).setAllowCrossOrigin(!1).setMethod("POST").setRawData(d).setErrorHandler(this.$LiveVideoBroadcastAPIBroadcastStore11).setHandler(c).send()};d.$LiveVideoBroadcastAPIBroadcastStore10=function(a){a?(b("LiveVideoBroadcastActions").setScheduledLiveData(!0,null),b("LiveVideoBroadcastActions").scheduledLiveSuccess(!1,!0)):b("LiveVideoBroadcastActions").scheduledLiveSuccess(!0,!1)};d.$LiveVideoBroadcastAPIBroadcastStore11=function(a,c){b("LiveVideoBroadcastActions").scheduledLiveFail(c!=null?c.getResponse():null)};d.$LiveVideoBroadcastAPIBroadcastStore6=function(a,c,d){var e=b("XLiveComposerPrivacySelectorController").getURIBuilder();e=b("ActorURI").create(e.getURI(),a);new(b("AsyncRequest"))().setURI(e).setData({video_id:c,target_id:d}).setMethod("POST").send()};d.$LiveVideoBroadcastAPIBroadcastStore7=function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.inputSource;if(a===j.CAMERA)return;b("Bootloader").loadModules(["ModernLiveVideoEndMutation","RelayFBEnvironment"],function(a,c){a.commit(c,{videoID:b("LiveVideoBroadcastIDStore").get("videoID")},{onCompleted:function(){b("LiveVideoBroadcastActions").finishBroadcastSuccess()},onError:function(a){b("LiveVideoBroadcastActions").errorEndBroadcastMutationFail(a),b("ErrorDialog").show(g._("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e34\u0e49\u0e19\u0e2a\u0e38\u0e14\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e1e"),g._("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e34\u0e49\u0e19\u0e2a\u0e38\u0e14\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e1e \u0e42\u0e1b\u0e23\u0e14\u0e25\u0e2d\u0e07\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07"))}})},"LiveVideoBroadcastAPIBroadcastStore")};d.$LiveVideoBroadcastAPIBroadcastStore8=function(){var a=this.get("apiVideoID");a&&b("LiveVideoBroadcastBroadcastStore").deleteVideo(a)};return c}(b("FluxMapStore"));c.__moduleID=e.id;e.exports=new c(b("LiveVideoBroadcastDispatcher"))}),null);
__d("StreamingSDKUtils",["FBLogger"],(function(a,b,c,d,e,f){"use strict";a={dcheck:function(a){a||b("FBLogger")("www_livestreaming").info("Check failed")},check:function(a){a||b("FBLogger")("www_livestreaming").mustfix("Check failed")}};e.exports=a}),null);
__d("ComponentWithContext",["regeneratorRuntime","StreamingSDKUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=!1,this.$2=!1,this.$3=!1,this.$6=!1}var c=a.prototype;c.onInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onUninitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onStopped=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.doInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("StreamingSDKUtils").check(!this.$3);this.$3=!0;a.next=4;return b("regeneratorRuntime").awrap(this.onInitialize());case 4:case"end":return a.stop()}},null,this)};c.doUninitialize=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!this.$3){a.next=4;break}this.$3=!1;a.next=4;return b("regeneratorRuntime").awrap(this.onUninitialize());case 4:case"end":return a.stop()}},null,this)};c.doStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("StreamingSDKUtils").check(!this.$2);this.$2=!0;a.next=4;return b("regeneratorRuntime").awrap(this.onStarted());case 4:case"end":return a.stop()}},null,this)};c.doStopped=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!this.$2){a.next=4;break}this.$2=!1;a.next=4;return b("regeneratorRuntime").awrap(this.onStopped());case 4:case"end":return a.stop()}},null,this)};c.doPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("StreamingSDKUtils").check(!this.$1);this.$1=!0;a.next=4;return b("regeneratorRuntime").awrap(this.onPaused());case 4:case"end":return a.stop()}},null,this)};c.doResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("StreamingSDKUtils").check(this.$1);this.$1=!1;a.next=4;return b("regeneratorRuntime").awrap(this.onResumed());case 4:case"end":return a.stop()}},null,this)};c.doStartedOrResumed=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!this.$1){a.next=6;break}this.$1=!1;a.next=4;return b("regeneratorRuntime").awrap(this.onResumed());case 4:a.next=8;break;case 6:a.next=8;return b("regeneratorRuntime").awrap(this.doStarted());case 8:case"end":return a.stop()}},null,this)};c.isPaused=function(){return this.$1};c.isInitialized=function(){return this.$3};c.isStarted=function(){return this.$2};c.attachServiceBus=function(a){__p&&__p();var b=this;this.$5=a;this.getRequiredServices().forEach(function(b){if(!a.hasService(b))throw new Error("Cannot find required service "+b)});this.$6=!1;this.getDeferrableServices().forEach(function(c){if(!a.hasService(c)){b.$6=!0;return}})};c.detachServiceBus=function(){this.$5=null};c.getServiceBus=function(){return this.$5};c.getRequiredServices=function(){return[]};c.getOptionalServices=function(){return[]};c.getDeferrableServices=function(){return[]};c.attach=function(a){this.$4=a};c.detach=function(){this.$4=null};c.getContext=function(){return this.$4};return a}();e.exports=a}),null);
__d("Service",["ComponentWithContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.isMultiBind=function(){return!1};c.getServiceId=function(){throw new Error("getServiceId must be implemented")};c.getServiceOrNull=function(a){var b=this.getServiceBus();return b==null?null:b.getServiceOrNull(a)};c.getServiceOrThrow=function(a){var b=this.getServiceOrNull(a);if(b==null)throw new Error('Service "'+a+'" not found');return b};return b}(b("ComponentWithContext"));e.exports=a}),null);
__d("ServiceImpl",["Service"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getInterface=function(){throw new Error("Not implemented")};return b}(b("Service"));e.exports=a}),null);
__d("BroadcastIdProvider",["ServiceImpl"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$BroadcastIdProvider1=b;return c}var c=b.prototype;c.getBroadcastId=function(){return this.$BroadcastIdProvider1};c.getServiceId=function(){return"broadcast_id_provider"};c.getInterface=function(){return this};return b}(b("ServiceImpl"));e.exports=a}),null);
__d("SimpleServiceProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.provide=function(a){a.addService(this.$1)};return a}();e.exports=a}),null);
__d("ServiceBus",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){this.$2=[],this.$3=new Map(),this.addServices(a),this.$1=b}var b=a.prototype;b.addBackgroundService=function(a){this.$2.indexOf(a)!==-1&&this.$2.push(a)};b.addServices=function(a){var b=this;a.forEach(function(a){a.provide(b)})};b.addService=function(a){this.addServiceOrThrowInternal(a.getServiceId(),a)};b.addServiceOrThrowInternal=function(a,b){if(this.$3.get(a)!=null)throw new Error("Service already bound for ID "+a);this.$3.set(a,b)};b.hasService=function(a){return this.$3.get(a)!=null||this.$1!=null&&this.$1.hasService(a)};b.getServiceOrNull=function(a){return this.getServiceInternal(a)};b.getServiceInternal=function(a){var b=this.$3.get(a);if(b)return b;else if(this.$1!=null)return this.$1.getServiceInternal(a);else return null};b.getSortedServices=function(){var a=[];this.$3.forEach(function(b){a.push(b)});this.$2.forEach(function(b){a.push(b)});return a};return a}();e.exports=a}),null);
__d("ExecutionContext",["QueueDataStructure","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new(b("QueueDataStructure"))()}var c=a.prototype;c.add=function(a){var c=this;this.$1.enqueue(a);var d=this.$1.peek();a==d&&b("setTimeout")(function(){c.$2(a)},0);return this};c.$2=function(a){var b=this;a(function(){b.$1.dequeue();var a=b.$1.peek();a!=null&&b.$2(a)})};return a}();e.exports=a}),null);
__d("StreamingError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(a,b,c,d){d===void 0&&(d={}),this.code=a,this.description=b,this.what=c,this.extra=d,this.trace=new Error().stack}var b=a.prototype;b.toString=function(){return"StreamingError: "+this.description+", what: "+this.what+", code: "+this.code};b.toJsonString=function(){return JSON.stringify({code:this.code.toString(),description:this.description,what:this.what,extra:this.extra,trace:this.trace})};return a}();e.exports=a}),null);
__d("StreamingErrorCodes",[],(function(a,b,c,d,e,f){"use strict";e.exports={GenericError:0,CapsNegotiationError:1,StateTransitionError:2,DataWriteError:3,MessageBusError:4,NodeTeardownError:5,ServiceTeardownError:6,FlowStateError:7,InterruptedTooLongError:8,VideoSourceError:100,AudioSourceError:101,VideoEncoderError:102,AudioEncoderError:103,NetworkError:104,AudioMixerError:105,DvrError:106,MuxerError:107,MaxFatalCodeError:1e4,BigAVGapError:10001}}),null);
__d("StreamingPipelineController",["regeneratorRuntime","StreamingSDKUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c){this.$4=[],this.$1=a,this.$2=c,this.$3=b,this.assumePipeline(a)}var c=a.prototype;c.fireError=function(a){this.$2.onPipelineError(a),this.stop()};c.getServiceBus=function(){return this.$3};c.initialize=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:this.$5(function(b){if(b.isInitialized())return;b.attach(a);b.attachServiceBus(a.$3);b.doInitialize()},!1);c.next=3;return b("regeneratorRuntime").awrap(this.$6(function(c){var d;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:d=c.getNode(),d.attach(a),d.attachServiceBus(a.$3),d.doInitialize();case 4:case"end":return b.stop()}},null,this)},!0));case 3:case"end":return c.stop()}},null,this)};c.uninitialize=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(this.$6(function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=a.getNode();d.next=3;return b("regeneratorRuntime").awrap(c.doUninitialize());case 3:case"end":return d.stop()}},null,this)},!0));case 2:this.$5(function(a){a.doUninitialize()},!1);case 3:case"end":return a.stop()}},null,this)};c.start=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(this.resume());case 2:case"end":return a.stop()}},null,this)};c.pause=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.$6(function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(c.getNode().doPaused());case 2:a.$7(c,function(a){a.resetCapsNegotations(),a.onInactive()});case 3:case"end":return d.stop()}},null,this)},!1));case 2:this.$5(function(a){a.doPaused()},!1);case 3:case"end":return c.stop()}},null,this)};c.resume=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:this.$5(function(a){a.isStarted()?a.doResumed():a.doStarted()},!1);this.$8();c.next=4;return b("regeneratorRuntime").awrap(this.$6(function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a.$7(c,function(a){a.onActive()});d.next=3;return b("regeneratorRuntime").awrap(c.getNode().doStartedOrResumed());case 3:case"end":return d.stop()}},null,this)},!0));case 4:case"end":return c.stop()}},null,this)};c.stop=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.$6(function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(c.getNode().doStopped());case 2:a.$7(c,function(a){a.resetCapsNegotations(),a.onInactive()});case 3:case"end":return d.stop()}},null,this)},!1));case 2:this.$5(function(a){a.doStopped()},!1);case 3:case"end":return c.stop()}},null,this)};c.$8=function(){var a=this;this.$6(function(c){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a.$7(c,function(a){a.negotiateCaps()});case 1:case"end":return b.stop()}},null,this)},!1)};c.$5=function(a,b){if(b)for(var b=this.$4.length-1;b>=0;b--)a(this.$4[b]);else this.$4.forEach(function(b){a(b)})};c.$6=function(a,c){__p&&__p();var d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:d=this.$1.getNodes();if(!c){g.next=11;break}e=d.length-1;case 3:if(!(e>=0)){g.next=9;break}g.next=6;return b("regeneratorRuntime").awrap(a(d[e]));case 6:e--;g.next=3;break;case 9:g.next=18;break;case 11:f=0;case 12:if(!(f<d.length)){g.next=18;break}g.next=15;return b("regeneratorRuntime").awrap(a(d[f]));case 15:f++;g.next=12;break;case 18:case"end":return g.stop()}},null,this)};c.$7=function(a,b){a.getLinks().forEach(function(a){b(a)})};c.assumePipeline=function(a){this.$1=a,b("StreamingSDKUtils").check(a.isFinalized()),this.$4=this.$3.getSortedServices()};return a}();e.exports=a}),null);
__d("StreamingSession",["Promise","regeneratorRuntime","ExecutionContext","FBLogger","StreamingError","StreamingErrorCodes","StreamingPipelineController","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){return"Invalid state transition: "+a+" -> "+b};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}return b}(babelHelpers.wrapNativeSuper(Error));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){return b.call(this,g(a,c))||this}return a}(a);c=function(){__p&&__p();function a(a,c,d){this.$1="UNINITIALIZED",this.$3=!1,this.$4=!1,this.$2=c,this.$5=new(b("StreamingPipelineController"))(a,d,this),this.$6=new(b("ExecutionContext"))()}var c=a.prototype;c.initialize=function(){var a=this;b("promiseDone")(this.$7("INITIALIZED"),function(b){a.$4=!0,a.$2.onInitialized()},function(b){a.$8(b,"INITIALIZED")})};c.start=function(){var a=this;b("promiseDone")(this.$7("STARTED","START"),function(c){c.from=="INITIALIZED"?(a.$3=!0,a.$2.onStarted()):c.from=="PAUSED"?a.$2.onResumed():b("FBLogger")("www_livestreaming").mustfix("uhoh")},function(b){a.$8(b,"STARTED")})};c.pause=function(){var a=this;b("promiseDone")(this.$7("PAUSED"),function(b){a.$2.onPaused()},function(b){a.$8(b,"PAUSED")})};c.resume=function(){var a=this;b("promiseDone")(this.$7("STARTED","RESUME"),function(b){a.$2.onResumed()},function(b){a.$8(b,"STARTED")})};c.stop=function(){var a=this;b("promiseDone")(this.$7("STOPPED"),function(b){a.$9()},function(b){a.$8(b,"STOPPED")});this.release()};c.release=function(){var a=this;b("promiseDone")(this.$7("RELEASED"),function(b){a.$10()},function(b){a.$8(b,"RELEASED")})};c.$11=function(a,b){switch(a){case"INITIALIZED":return this.$1==="UNINITIALIZED";case"STARTED":return this.$1==="INITIALIZED"&&b==="START"||this.$1==="PAUSED"&&(b==="RESUME"||b==="START");case"PAUSED":return this.$1==="STARTED";case"STOPPED":return this.$1!=="UNINITIALIZED"&&this.$1!=="RELEASED";case"RELEASED":return this.$1!=="RELEASED";case"TRANSIENT_WORK":return this.$1!=="RELEASED"&&this.$1!=="STOPPED";default:return!1}};c.$7=function(a,c){__p&&__p();var d=this;c===void 0&&(c="NONE");return new(b("Promise"))(function(e,f){__p&&__p();d.$6.add(function(g){__p&&__p();var i;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:b("FBLogger")("www_livestreaming").info("transitionToState("+a+")");d.$11(a,c)||f(new h(d.$1,a));j.t0=a;j.next=j.t0==="INITIALIZED"?5:j.t0==="STARTED"?8:j.t0==="PAUSED"?17:j.t0==="STOPPED"?20:j.t0==="RELEASED"?23:j.t0==="TRANSIENT_WORK"?26:27;break;case 5:j.next=7;return b("regeneratorRuntime").awrap(d.$5.initialize());case 7:return j.abrupt("break",28);case 8:if(!(d.$1=="INITIALIZED")){j.next=13;break}j.next=11;return b("regeneratorRuntime").awrap(d.$5.start());case 11:j.next=16;break;case 13:if(!(d.$1=="PAUSED")){j.next=16;break}j.next=16;return b("regeneratorRuntime").awrap(d.$5.resume());case 16:return j.abrupt("break",28);case 17:j.next=19;return b("regeneratorRuntime").awrap(d.$5.pause());case 19:return j.abrupt("break",28);case 20:j.next=22;return b("regeneratorRuntime").awrap(d.$5.stop());case 22:return j.abrupt("break",28);case 23:j.next=25;return b("regeneratorRuntime").awrap(d.$5.uninitialize());case 25:return j.abrupt("break",28);case 26:return j.abrupt("break",28);case 27:return j.abrupt("break",28);case 28:i=d.$1,d.$1=a,e({from:i,to:a,success:!0}),g();case 32:case"end":return j.stop()}},null,this)})})};c.$8=function(a,c){if(a instanceof h){var d=a;b("FBLogger")("www_livestreaming").warn(d.message)}else this.$12(new(b("StreamingError"))(b("StreamingErrorCodes").StateTransitionError,"Error while transitioning from "+this.$1+" to "+c,a.message))};c.$12=function(a){__p&&__p();var b=this;if(this.$5){var c=this.$5.getServiceBus().getServiceOrNull("session_logger");c&&c.getInterface().logStreamingError(a)}this.$2.onError(a);this.$7("STOPPED").then(function(){b.$9()})["catch"]();this.$7("RELEASED").then(function(){b.$10()})["catch"]()};c.$9=function(){this.$3&&(this.$3=!1,this.$2.onStopped())};c.$10=function(){this.$4&&(this.$4=!1,this.$2.onReleased())};c.onPipelineError=function(a){this.$12(a)};return a}();e.exports=c}),null);
__d("StreamingSessionBuilder",["ServiceBus","StreamingSession","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d){this.$1=a,this.$2=c,this.$3=new(b("ServiceBus"))(d),a.setServiceBus(this.$3)}var c=a.prototype;c.build=function(){var a=b("nullthrows")(this.$1).build();this.$1=null;return new(b("StreamingSession"))(a,this.$2,this.$3)};c.addMediaSource=function(a){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];(c=b("nullthrows")(this.$1)).addMediaSource.apply(c,[a].concat(e))};return a}();e.exports=a}),null);
__d("BaseLiveStreamingClient",["BroadcastIdProvider","FBLogger","SimpleServiceProvider","StreamingSessionBuilder","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d,e){this.$1=a,this.$2=c,this.$4=new(b("StreamingSessionBuilder"))(c,e,this.$5(a,d))}var c=a.prototype;c.getSessionBuilder=function(){return this.$4};c.setSession=function(a){this.$3=a};c.getConfig=function(){return this.$1};c.start=function(){if(!this.$3){b("FBLogger")("www_livestreaming").warn("No session");return}this.$3.start()};c.stop=function(){b("nullthrows")(this.$3).stop()};c.pause=function(){b("nullthrows")(this.$3).pause()};c.resume=function(){b("nullthrows")(this.$3).resume()};c.$5=function(a,c){c.push(new(b("SimpleServiceProvider"))(new(b("BroadcastIdProvider"))(this.$1.broadcastID)));return c};return a}();e.exports=a}),null);
__d("DashIngestStreamingRequest",["FBLogger","Random","XHRRequest","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b)||this;b.$DashIngestStreamingRequest3=0;b.setMethod("PUT");b.setDataSerializer(function(a){return a});a.prototype.setErrorHandler.call(babelHelpers.assertThisInitialized(b),b.$DashIngestStreamingRequest5.bind(babelHelpers.assertThisInitialized(b)));b.$DashIngestStreamingRequest2=c;b.$DashIngestStreamingRequest4=c.retryDelayMs;return b}var d=c.prototype;d.setErrorHandler=function(a){this.$DashIngestStreamingRequest1=a;return this};d.$DashIngestStreamingRequest5=function(a){__p&&__p();var c=this;if(this.$DashIngestStreamingRequest3>=this.$DashIngestStreamingRequest2.maxAttempts){b("FBLogger")("www_livestreaming").debug("Reached max retry count, giving up");this.$DashIngestStreamingRequest1&&this.$DashIngestStreamingRequest1(a);return}a=b("Random").random()*2-1;a=a*.5;a=this.$DashIngestStreamingRequest4*(1+a);b("FBLogger")("www_livestreaming").debug("Request failed, retrying in "+a+"ms");b("setTimeout")(function(){c.send()},a);this.$DashIngestStreamingRequest4*=this.$DashIngestStreamingRequest2.backOffFactor;this.$DashIngestStreamingRequest3++};return c}(b("XHRRequest"));e.exports=a}),null);
__d("LiveStreamingWebmSegment",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.getData=function(){return this.$1};b.getSegmentNumber=function(){return this.$2};b.isInitSegment=function(){return this.$2===0};b.getMetadata=function(){return this.$3};b.getMetadataTrackByType=function(a){if(this.$3==null)return null;var b=null;this.$3.tracks.forEach(function(c){if(c.type===a){b=c;return}});return b};return a}();e.exports=a}),null);
__d("StreamingNodeBase",["ComponentWithContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$StreamingNodeBase2=!1;c.$StreamingNodeBase3=!1;c.$StreamingNodeBase4=!1;c.$StreamingNodeBase1=b;return c}var c=b.prototype;c.getId=function(){return this.$StreamingNodeBase1};return b}(b("ComponentWithContext"));e.exports=a}),null);
__d("StreamingPad",["nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){this.$1=a,this.$3=b}var c=a.prototype;c.getName=function(){return this.$1};c.getNode=function(){return this.$3};c.onLinked=function(a){this.$2=a};c.getLink=function(){return b("nullthrows")(this.$2)};c.isLinked=function(){return this.$2!=null};c.requestCapsNegotiation=function(){this.$2&&this.$2.requestCapsNegotiation()};return a}();e.exports=a}),null);
__d("StreamingSinkPad",["Promise","FBLogger","StreamingPad"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$StreamingSinkPad1="NORMAL",b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.reportFlowState=function(a,c){if(this.$StreamingSinkPad1==a)return new(b("Promise"))(function(a,b){return a(!1)});b("FBLogger")("www_livestreaming").info("Flow state changed to "+a+" from "+this.$StreamingSinkPad1+" on "+this.getName());this.$StreamingSinkPad1=a;return this.getLink().onFlowState(a,c)};return c}(b("StreamingPad"));e.exports=a}),null);
__d("StreamingSrcPad",["StreamingPad"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$StreamingSrcPad1="NORMAL",b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.write=function(a){this.getLink().write(a)};c.setFlowState=function(a){this.$StreamingSrcPad1=a};return b}(b("StreamingPad"));e.exports=a}),null);
__d("StreamingNode",["Promise","FBLogger","StreamingNodeBase","StreamingSinkPad","StreamingSrcPad"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.onData=function(a,b){};d.onFlowState=function(a,c){b("FBLogger")("www_livestreaming").mustfix("onFlowState() must be implemented by subclass");return new(b("Promise"))(function(a,b){return a(!1)})};d.getOrCreateSrcPad=function(){this.$StreamingNode1||(this.$StreamingNode1=new(b("StreamingSrcPad"))("src",this));return this.$StreamingNode1};d.getOrCreateSinkPad=function(){this.$StreamingNode2||(this.$StreamingNode2=new(b("StreamingSinkPad"))("sink",this));return this.$StreamingNode2};return c}(b("StreamingNodeBase"));e.exports=a}),null);
__d("StreamingSimpleNode",["regeneratorRuntime","StreamingNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$StreamingSimpleNode1=[];return b}var d=c.prototype;d.onData=function(a,b){};d.addLink=function(a){this.$StreamingSimpleNode1.push(a)};d.getLinks=function(){return this.$StreamingSimpleNode1};d.onInitialized=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};d.onStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};d.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};d.onStopped=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};return c}(b("StreamingNode"));e.exports=a}),null);
__d("FBWWWDashTransportNode",["regeneratorRuntime","Promise","DashIngestStreamingRequest","ExecutionContext","LiveStreamingWebmSegment","StreamingError","StreamingErrorCodes","StreamingSimpleNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){c=a.call(this,c)||this;c.$FBWWWDashTransportNode1=d;c.$FBWWWDashTransportNode2=new(b("ExecutionContext"))();return c}var d=c.prototype;d.onStopped=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",new(b("Promise"))(function(c){a.$FBWWWDashTransportNode2.add(function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a(),c();case 2:case"end":return b.stop()}},null,this)})}));case 1:case"end":return c.stop()}},null,this)};d.onData=function(a,c){__p&&__p();if(c instanceof b("LiveStreamingWebmSegment")){a=c;a.isInitSegment()?this.$FBWWWDashTransportNode3(a):this.$FBWWWDashTransportNode4(a)}else{a=this.getContext();if(a!=null){c=c.constructor.name;a.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").NetworkError,"onData received unsupported datatype","Expected: LiveStreamingWebmSegment, Actual: "+c,{}))}}};d.$FBWWWDashTransportNode5=function(a){var b=this.getOrCreateSrcPad();b&&b.isLinked()&&b.write(a)};d.$FBWWWDashTransportNode6=function(a){return this.$FBWWWDashTransportNode1.dashIngestUri+"&filename="+a};d.$FBWWWDashTransportNode7=function(a){__p&&__p();var c=this,d=a.getMetadataTrackByType("video");a=a.getMetadataTrackByType("audio");if(d==null||a==null){var e=this.getContext();e!=null&&e.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").NetworkError,"Missing required data for manifest","audioTrack or videoTrack is null",{audioTrack:a,videoTrack:d}));return}var f=d.codec+","+a.codec,g=d.width,h=d.height,i=a.sampling_frequency,j=a.channels,k=1e6;if(h==null||g==null||i==null||j==null){e=this.getContext();e!=null&&e.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").NetworkError,"Missing required data for manifest","height, width, audioSamplingRate, or audioChannels is null",{height:h,width:g,audioSamplingRate:i,audioChannels:j}));return}var l='\n<?xml version="1.0"?>\n<MPD xmlns="urn:mpeg:dash:schema:mpd:2011" minBufferTime="PT1.500S" type="static" mediaPresentationDuration="PT0H1M0.034S" maxSegmentDuration="PT0H0M1.000S" profiles="urn:mpeg:dash:profile:full:2011">\n <ProgramInformation moreInformationURL="http://gpac.sourceforge.net">\n  <Title>dash_manifest.mpd</Title>\n </ProgramInformation>\n\n <Period duration="PT0H1M0.034S">\n  <AdaptationSet segmentAlignment="true" maxWidth="1280" maxHeight="720" maxFrameRate="30" par="1280:720" lang="eng">\n   <SegmentTemplate timescale="1000" media="dash_segment_$Number$.webm" startNumber="1" duration="5000" initialization="dash_segment_init.webm"/>\n   <Representation id="1" mimeType="video/webm" codecs="'+f+'" width="'+g+'" height="'+h+'" frameRate="30" sar="1:1" audioSamplingRate="'+i+'" startWithSAP="0" bandwidth="'+k+'">\n    <AudioChannelConfiguration schemeIdUri="urn:mpeg:dash:23003:3:audio_channel_configuration:2011" value="'+j+'"/>\n   </Representation>\n  </AdaptationSet>\n </Period>\n</MPD>\n',m=this.$FBWWWDashTransportNode6("dash_manifest.mpd");this.$FBWWWDashTransportNode2.add(function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:new(b("DashIngestStreamingRequest"))(m,c.$FBWWWDashTransportNode1).setData(l).setResponseHandler(function(b){a()}).setErrorHandler(function(e){var l=e.message||e.errorMsg,d=c.getContext();d!=null&&d.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").NetworkError,"Error while sending manifest",l,{width:g,height:h,codecs:f,audioSamplingRate:i,audioChannels:j,bandwidth:k,error:e}));a()}).send();case 1:case"end":return d.stop()}},null,this)})};d.$FBWWWDashTransportNode3=function(a){__p&&__p();var c=this;this.$FBWWWDashTransportNode7(a);var d="dash_segment_init.webm";this.$FBWWWDashTransportNode8(a.getData(),d);this.$FBWWWDashTransportNode2.add(function(e){__p&&__p();var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:f=c.$FBWWWDashTransportNode6(d),new(b("DashIngestStreamingRequest"))(f,c.$FBWWWDashTransportNode1).setData(a.getData()).setResponseHandler(function(a){e()}).setErrorHandler(function(d){var f=c.getContext();f!=null&&f.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").NetworkError,"Error while sending segment",d.message||d.errorMsg,{segment:a.getSegmentNumber(),error:d}));e()}).send();case 2:case"end":return g.stop()}},null,this)})};d.$FBWWWDashTransportNode4=function(a){__p&&__p();var c=this,d="dash_segment_"+a.getSegmentNumber()+".webm";this.$FBWWWDashTransportNode8(a.getData(),d);this.$FBWWWDashTransportNode2.add(function(e){__p&&__p();var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:f=c.$FBWWWDashTransportNode6(d),new(b("DashIngestStreamingRequest"))(f,c.$FBWWWDashTransportNode1).setData(a.getData()).setResponseHandler(function(a){e()}).setErrorHandler(function(d){var f=d.message||d.errorMsg,g=c.getContext();g!=null&&g.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").NetworkError,"Error while sending segment",f,{segment:a.getSegmentNumber(),error:d}));e()}).send();case 2:case"end":return g.stop()}},null,this)})};d.$FBWWWDashTransportNode8=function(a,c){__p&&__p();var d,e,f;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:if(!(this.$FBWWWDashTransportNode1.downloadRequestBlobs!==!0)){b.next=2;break}return b.abrupt("return");case 2:d=new Blob([a],{type:"video/webm"}),e=URL.createObjectURL(d),f=document.createElement("a"),document.body&&(document.body.appendChild(f),f.style.cssText="display: none",f.href=e,f.download=c,f.click(),window.URL.revokeObjectURL(e));case 6:case"end":return b.stop()}},null,this)};return c}(b("StreamingSimpleNode"));e.exports=a}),null);
__d("FBWWWStreamingMediaRecorderAdapter",["regeneratorRuntime","Promise","ExecutionContext","StreamingError","StreamingErrorCodes","StreamingSimpleNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.$FBWWWStreamingMediaRecorderAdapater1=new(b("ExecutionContext"))();return c}var d=c.prototype;d.onStopped=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",new(b("Promise"))(function(c){a.$FBWWWStreamingMediaRecorderAdapater1.add(function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a(),c();case 2:case"end":return b.stop()}},null,this)})}));case 1:case"end":return c.stop()}},null,this)};d.onData=function(a,c){__p&&__p();if(c instanceof Blob){a=c;this.$FBWWWStreamingMediaRecorderAdapater2(a)}else{a=this.getContext();if(a!=null){c=c.constructor.name;a.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").GenericError,"onData received unsupported datatype","Expected: Blob, Actual: "+c,{}))}}};d.$FBWWWStreamingMediaRecorderAdapater2=function(a){__p&&__p();var c=this;this.$FBWWWStreamingMediaRecorderAdapater1.add(function(d){var e;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:e=new FileReader(),e.onload=function(a){a=a.target.result;a=new DataView(a);c.$FBWWWStreamingMediaRecorderAdapater3(a)},e.readAsArrayBuffer(a),d();case 4:case"end":return b.stop()}},null,this)})};d.$FBWWWStreamingMediaRecorderAdapater3=function(a){var b=this.getOrCreateSrcPad();b&&b.isLinked()&&b.write(a)};return c}(b("StreamingSimpleNode"));e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/8SOvLuObRf9/
 */
__d("WWWSDKWebmParser",["DataViewReader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=440786851,h=408125543,i=357149030,j=374648427,k=2807729,l=17545,m=131,n=134,o=224,p=225,q=370966679608,r=370966679609,s=71877608363347,t=176,u=186,v=181,w=159,x=25188,y=524531317,z=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function A(a,b){__p&&__p();if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var B=function(){__p&&__p();function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getDataView=function(){return this.$1};b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new C(this.$1)};b.getUint=function(){__p&&__p();if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),C=function(){__p&&__p();function a(a){this.$1=a,this.$2=new(b("DataViewReader"))(this.$1)}var c=a.prototype;c.hasMoreData=function(){return this.$2.hasMoreData()};c.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new B(b,d)};c.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};c.$4=function(){__p&&__p();var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes. Got "+b);c=new Uint8Array(b);c[0]=a;for(var a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<z.length;b++)if(A(a,z[b]))return!0;return!1};return a}();function D(a){__p&&__p();a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==k?b=d.getUint():d.id==l&&(c=d.getFloat())}d=b/1e9;a=0;c!=null&&(a=c*d);return{timecodeScale:d,duration:a}}function E(a){__p&&__p();if(a==null)return[];var b=[];a=a.createParser();while(a.hasMoreData()){var c=a.parseElement();c=c.createParser();var d=null,e=null,f={};while(c.hasMoreData()){var g=c.parseElement();g.id===m&&(d=g.getUint());g.id===n&&(e=g.getUint());g.id===o&&(f=F(g));g.id===p&&(f=G(g))}d==1&&(f.type="video",e===r&&(f.codec="vp9"),e===q&&(f.codec="vp8"));d==2&&(f.type="audio",e===s&&(f.codec="opus"));b.push(f)}return b}function F(a){a=a.createParser();var b={};while(a.hasMoreData()){var c=a.parseElement();c.id===t&&(b.width=c.getUint());c.id===u&&(b.height=c.getUint())}return b}function G(a){a=a.createParser();var b={};while(a.hasMoreData()){var c=a.parseElement();c.id===v&&(b.sampling_frequency=c.getFloat());c.id===w&&(b.channels=c.getUint());c.id===x&&(b.bit_depth=c.getUint())}return b}function H(a){__p&&__p();var b=[],c=4+8,d=null;try{var e=[],f=new C(a);while(f.hasMoreData()){var g=f.parseElement();e.push(g);while(e.length>0){g=e[0];e=e.slice(1);g.id===y&&(d!==null&&b.push(new Uint8Array(a.buffer,d,g.getDataView().byteOffset-c-d)),d=g.getDataView().byteOffset-c);g=g.createParser();while(g.hasMoreData()){var h=g.parseElement();h.id==y&&e.push(h)}}}}catch(a){}h=d===null?null:new Uint8Array(a.buffer,d);return{clusters:b,remainingData:h}}function a(a){__p&&__p();a=new C(a);var b=a.parseElement();if(b.id!=g)return null;b=a.parseElement();if(b.id!=h)return null;a=b.createParser();var c=null,d=null;while(a.hasMoreData()){var e=a.parseElement();e.id===i&&(c=e);e.id===j&&(d=e)}if(!c)return null;if(!d)return null;e=D(c);a=E(d);c=b.getOffset();d=d.getDataView().byteLength+d.getDataView().byteOffset;var f=new Uint8Array(b.getDataView().buffer,0,d);b=H(new DataView(b.getDataView().buffer,d,b.getDataView().buffer.byteLength-d));return{metadata:{segmentOffset:c,timecodeScale:e.timecodeScale,duration:e.duration,tracks:a},initSegment:f,clusters:b.clusters,remainingData:b.remainingData}}e.exports={parse:a}}),null);
__d("FBWWWStreamingMediaRecorderParserNode",["regeneratorRuntime","LiveStreamingWebmSegment","StreamingSimpleNode","WWWSDKWebmParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$FBWWWStreamingMediaRecorderParserNode1=0;b.$FBWWWStreamingMediaRecorderParserNode2=0;return b}var d=c.prototype;d.onStopped=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$FBWWWStreamingMediaRecorderParserNode4!=null&&this.$FBWWWStreamingMediaRecorderParserNode5(new(b("LiveStreamingWebmSegment"))(this.$FBWWWStreamingMediaRecorderParserNode4,++this.$FBWWWStreamingMediaRecorderParserNode1));case 1:case"end":return a.stop()}},null,this)};d.onData=function(a,b){if(b instanceof DataView){a=b;this.$FBWWWStreamingMediaRecorderParserNode6(a)}};d.$FBWWWStreamingMediaRecorderParserNode7=function(a){var b=0;a.forEach(function(a){b+=a.byteLength});var c=new Uint8Array(b),d=0;a.forEach(function(a){c.set(a,d),d+=a.byteLength});return c};d.$FBWWWStreamingMediaRecorderParserNode6=function(a){__p&&__p();var c=this,d=a,e=[];this.$FBWWWStreamingMediaRecorderParserNode3!=null&&e.push(this.$FBWWWStreamingMediaRecorderParserNode3);this.$FBWWWStreamingMediaRecorderParserNode4!=null&&e.push(this.$FBWWWStreamingMediaRecorderParserNode4);if(e.length>0){e.push(new Uint8Array(a.buffer));a=this.$FBWWWStreamingMediaRecorderParserNode7(e);d=new DataView(a.buffer)}e=b("WWWSDKWebmParser").parse(d);if(e==null)return;if(this.$FBWWWStreamingMediaRecorderParserNode3==null){if(e.initSegment==null)return;this.$FBWWWStreamingMediaRecorderParserNode5(new(b("LiveStreamingWebmSegment"))(e.initSegment,0,e.metadata));this.$FBWWWStreamingMediaRecorderParserNode3=e.initSegment}e.clusters.forEach(function(a){c.$FBWWWStreamingMediaRecorderParserNode5(new(b("LiveStreamingWebmSegment"))(a,++c.$FBWWWStreamingMediaRecorderParserNode1))});this.$FBWWWStreamingMediaRecorderParserNode4=e.remainingData};d.$FBWWWStreamingMediaRecorderParserNode5=function(a){var b=this.getOrCreateSrcPad();b&&b.isLinked()&&b.write(a)};return c}(b("StreamingSimpleNode"));e.exports=a}),null);
__d("StreamingPipelineLink",["Promise","FBLogger","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d){this.$5=!1,this.$6=!1,this.$3=a,this.$1=b,this.$2=c,this.$4=d}var c=a.prototype;c.write=function(a){if(!this.$6){b("FBLogger")("www_livestreaming").info("Writing to inactive link "+this.$4+", ignored.");return}this.$3.onData(a)};c.requestCapsNegotiation=function(){if(!this.$1||!this.$2){b("FBLogger")("www_livestreaming").warn("Negotiate on detached link "+this.$4+", ignored.");return}this.$5=!1;this.negotiateCaps()};c.onFlowState=function(a,c){var d=this;return new(b("Promise"))(function(e,f){b("promiseDone")(d.$3.onFlowState(a),function(f){if(c&&!f){b("FBLogger")("www_livestreaming").warn("Flow state "+a+" issued on "+d.$4+" was not handled!");return e(!1)}return e(f)},function(a){return f()})})};c.negotiateCaps=function(){if(!this.$1||!this.$2){b("FBLogger")("www_livestreaming").warn("Negotiate on detached link "+this.$4+", ignored.");return}if(this.$5){b("FBLogger")("www_livestreaming").warn("Already negotiated on link "+this.$4+", skipping.");return}this.$5=!0};c.resetCapsNegotations=function(){this.$5=!1};c.src=function(){return this.$1};c.sink=function(){return this.$2};c.onActive=function(){this.$6=!0};c.onInactive=function(){this.$6=!1};return a}();e.exports=a}),null);
__d("StreamingPipelineLinkAdapter",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d){this.$1=a,this.$2=b,this.$3=c,this.$4=d}var b=a.prototype;b.onData=function(a){this.$1.onData(this.$4,a)};b.shouldNegotiateCaps=function(){return!0};b.onCapsNegotiationStarted=function(){};b.onRequestCaps=function(){};b.onSinkCapsAvailable=function(){return!0};b.onFlowState=function(a){this.$3.setFlowState(a);return this.$2.onFlowState(this.$3,a)};b.setCaps=function(){};return a}();e.exports=a}),null);
__d("StreamingPipelineNode",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2=[],this.$1=a}var b=a.prototype;b.getId=function(){return this.$1.getId()};b.getNode=function(){return this.$1};b.addLink=function(a){this.$2.push(a)};b.getLinks=function(){return this.$2};return a}();e.exports=a}),null);
__d("StreamingPipeline",["FBLogger","StreamingPipelineLink","StreamingPipelineLinkAdapter","StreamingPipelineNode","StreamingSDKUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2=!1,this.$3=new Map(),this.$1=a,this.$4=1,window.pipeline=this}var c=a.prototype;c.addNode=function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=new(Function.prototype.bind.apply(a,[null].concat([this.$4++],d)))();this.$3.set(f.getId(),new(b("StreamingPipelineNode"))(f));return f};c.getNodes=function(){return Array.from(this.$3.values())};c.connect=function(a,c){var d=b("nullthrows")(this.$3.get(a.getId())),e=b("nullthrows")(this.$3.get(c.getId())),f=a.getOrCreateSrcPad(),g=c.getOrCreateSinkPad();b("StreamingSDKUtils").check(!f.isLinked());b("StreamingSDKUtils").check(!g.isLinked());var h=a.getId()+":"+f.getName()+"->"+c.getId()+":"+g.getName();c=new(b("StreamingPipelineLinkAdapter"))(c,a,f,g);a=new(b("StreamingPipelineLink"))(c,d,e,h);f.onLinked(a);g.onLinked(a);d.addLink(a)};c.finalize=function(){if(this.$2)throw new Error("StreamingPipeline is already finalized");this.$2=!0;this.describePipeline()};c.isFinalized=function(){return this.$2};c.describePipeline=function(){this.$3.forEach(function(a,c){a.getLinks().forEach(function(a){b("FBLogger")("www_livestreaming").info("SrcNodeId: "+c+" -> SinkNodeId: "+a.sink().getId())})})};return a}();e.exports=a}),null);
__d("StreamingPipelineBuilder",["FBLogger","StreamingPipeline"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=new(b("StreamingPipeline"))(a)}var c=a.prototype;c.getPipeline=function(){return this.$1};c.build=function(){this.$1.finalize();return this.$1};c.addMediaSource=function(a){var b;for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=(b=this.$1).addNode.apply(b,[a].concat(d));this.onMediaSourceAdded(f)};c.onMediaSourceAdded=function(a){b("FBLogger")("www_livestreaming").mustfix("Subclass must implement onMediaSourceAdded")};c.setServiceBus=function(a){this.$2=a};return a}();e.exports=a}),null);
__d("FBWWWLiveStreamingPipelineBuilder",["FBWWWDashTransportNode","FBWWWStreamingMediaRecorderAdapter","FBWWWStreamingMediaRecorderParserNode","StreamingPipelineBuilder"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b)||this;b.$FBWWWLiveStreamingPipelineBuilder1=c;return b}var d=c.prototype;d.onMediaSourceAdded=function(a){var c=this.getPipeline().addNode(b("FBWWWStreamingMediaRecorderAdapter")),d=this.getPipeline().addNode(b("FBWWWStreamingMediaRecorderParserNode")),e=this.getPipeline().addNode(b("FBWWWDashTransportNode"),this.$FBWWWLiveStreamingPipelineBuilder1.transportConfig);this.getPipeline().connect(a,c);this.getPipeline().connect(c,d);this.getPipeline().connect(d,e)};return c}(b("StreamingPipelineBuilder"));e.exports=a}),null);
__d("SpeedtestHelpers",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);if(a!=null&&a.length>2&&typeof a[2]==="string"&&a[2].length>0)return a[2];else return""}function b(a,b){b=Math.pow(10,b);return Math.round(a*b)/b}function c(){return window.performance!=null&&window.performance.clearResourceTimings!=null&&window.performance.getEntries!=null}d="The test was unable to complete any network requests. Try selecting a smaller filesize.";e.exports={getHostName:a,precisionRound:b,noRequestsFinishedMessage:d,doesSupportResourceTimings:c}}),null);
__d("UploadSpeedtest",["SpeedtestHelpers","SpeedtestResultsTypedLogger"],(function(a,b,c,d,e,f){__p&&__p();var g=b("SpeedtestHelpers").doesSupportResourceTimings,h=b("SpeedtestHelpers").getHostName,i=b("SpeedtestHelpers").precisionRound;a=function(){"use strict";__p&&__p();function a(a){this.uploadSamples=[],this.options=a,this.uploadControllers=new Set(),this.results={estimatedRateMbps:0,actualTestDuration:0,megabitsTransferred:0,totalRequestsMade:0,url:a.url,averageLatency:0}}var c=a.prototype;c.start=function(){__p&&__p();var a=this;g()&&window.performance.clearResourceTimings();this.uploadControllers=new Set();var b=new window.Uint8Array(this.options.bytesToUpload);for(var c=0;c<this.options.bytesToUpload;c++)b[c]=Math.round(Math.random()*255);this.uploadBlob=new Blob([b],{type:"text/plain"});this.uploadSamples=[];this.results.totalRequestsMade=0;c=this.options.maxConcurrentRequests;for(var b=0;b<c;b++)this.spawnNewUploadTest();this.testTimeout=setTimeout(function(){return a.stop()},this.options.testDuration)};c.spawnNewUploadTest=function(){__p&&__p();var a=this,b=new XMLHttpRequest();this.uploadControllers.add(b);b.open("POST",this.options.url,!0);b.send(this.uploadBlob);b.onload=function(c){c=JSON.parse(b.responseText);a.uploadSamples.push({timeElapsed:c.durationMS,bytesUploaded:c.bytes});a.results.totalRequestsMade++;a.uploadControllers["delete"](b);if(a.results.totalRequestsMade>=a.options.maxTotalRequests){a.stop();return}a.spawnNewUploadTest()}};c.logUploadResults=function(){var a=h(this.options.url);new(b("SpeedtestResultsTypedLogger"))().setTestType("upload").setTestDuration(this.options.testDuration).setNumRequests(this.results.totalRequestsMade).setNumConcurrentRequests(this.options.maxConcurrentRequests).setRequestSize(this.options.bytesToUpload).setCdnHostname(a).setAvgLatency(this.results.averageLatency).setAvgMbps(this.results.estimatedRateMbps).logImmediately()};c.stop=function(){__p&&__p();var a=this;clearTimeout(this.testTimeout);for(var b=this.uploadControllers,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.abort()}var f=0;e=this.uploadSamples.length>0?this.uploadSamples.reduce(function(a,b){f+=b.bytesUploaded/125e3;return a+b.bytesUploaded/125e3/(b.timeElapsed/1e3)},0)/this.uploadSamples.length:0;if(g()){d=window.performance.getEntries().filter(function(b){return b instanceof window.PerformanceResourceTiming&&b.responseStart&&b.requestStart&&b.initiatorType==="xmlhttprequest"&&b.name.includes(a.options.url)}).map(function(a){return a.responseStart-a.requestStart});this.results.averageLatency=Math.round(d.reduce(function(a,b){return a+b},0)/d.length)}this.results.megabitsTransferred=i(f,2);this.results.estimatedRateMbps=e;this.results.actualTestDuration=this.options.testDuration/1e3;this.results.url=this.options.url;this.logUploadResults();this.options.callback!=null&&this.options.callback(this.results)};return a}();e.exports=a}),null);
__d("LiveVideoUploadSpeedtest",["UploadSpeedtest"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a.transportConfig.speedTestConfig;new(b("UploadSpeedtest"))({maxConcurrentRequests:d.maxConcurrentRequests,maxTotalRequests:d.maxTotalRequests,testDuration:d.maxTestDurationMs,bytesToUpload:d.speedTestPayloadSizeBytes,url:d.speedTestUrl,callback:function(a){a=a.estimatedRateMbps*1e6*d.percentOfEstimatedBitrateToUse;var b=a<d.speedTestMinimumBandwidthThreshold?"FAILED":"SUCCESS";c({estimatedUploadBitrate:a,status:b})}}).start()}e.exports={runVideoUploadSpeedTest:a}}),null);
__d("StreamingMediaSource",["StreamingNode"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("StreamingNode"));e.exports=a}),null);
__d("WWWStreamingMediaSource",["regeneratorRuntime","Promise","MediaRecorder","StreamingMediaSource","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d){b=a.call(this,b)||this;b.$WWWStreamingMediaSource3=d;b.$WWWStreamingMediaSource2=c;return b}var d=c.prototype;d.onStarted=function(){var a,c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:a=this.$WWWStreamingMediaSource3,c={mimeType:a.mediaRecorderConfig.codec,audioBitsPerSecond:a.mediaRecorderConfig.maxAudioBitrate,videoBitsPerSecond:a.mediaRecorderConfig.initialVideoBitrate!=null?a.mediaRecorderConfig.initialVideoBitrate:a.mediaRecorderConfig.maxVideoBitrate},d=new(b("MediaRecorder"))(this.$WWWStreamingMediaSource2,c),this.$WWWStreamingMediaSource1=d,d.ondataavailable=this.$WWWStreamingMediaSource4.bind(this),d.onerror=this.$WWWStreamingMediaSource5.bind(this),d.start(a.mediaRecorderConfig.chunkSizeInMs);case 7:case"end":return e.stop()}},null,this)};d.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("nullthrows")(this.$WWWStreamingMediaSource1).resume();case 1:case"end":return a.stop()}},null,this)};d.onPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("nullthrows")(this.$WWWStreamingMediaSource1).pause();case 1:case"end":return a.stop()}},null,this)};d.onStopped=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",new(b("Promise"))(function(b){var c=a.$WWWStreamingMediaSource1;if(c==null){b();return}c.onstop=function(){b()};c.stop()}));case 1:case"end":return c.stop()}},null,this)};d.$WWWStreamingMediaSource5=function(a){};d.$WWWStreamingMediaSource4=function(a){a.data&&this.$WWWStreamingMediaSource6(a.data)};d.$WWWStreamingMediaSource6=function(a){var b=this.getOrCreateSrcPad();b&&b.isLinked()&&b.write(a)};return c}(b("StreamingMediaSource"));e.exports=a}),null);
__d("FBWWWLiveStreamingClientImpl",["BaseLiveStreamingClient","FBWWWLiveStreamingPipelineBuilder","LiveVideoUploadSpeedtest","WWWStreamingMediaSource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LiveVideoUploadSpeedtest").runVideoUploadSpeedTest;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g){e=new(b("FBWWWLiveStreamingPipelineBuilder"))("pipeline",c);e=a.call(this,c,e,g,d)||this;e.getSessionBuilder().addMediaSource(b("WWWStreamingMediaSource"),f,c);g=e.getSessionBuilder().build();g.initialize();e.setSession(g);return e}var d=c.prototype;d.start=function(){var b=this,c=this.getConfig();g(c,function(d){var e=d.estimatedUploadBitrate;d=d.status;d==="SUCCESS"?e<c.mediaRecorderConfig.maxVideoBitrate+c.mediaRecorderConfig.maxAudioBitrate&&(c.mediaRecorderConfig.initialVideoBitrate=e-c.mediaRecorderConfig.maxAudioBitrate):d==="FAILED";a.prototype.start.call(b)})};return c}(b("BaseLiveStreamingClient"));e.exports=a}),null);
__d("FBWWWLiveStreamingClientBuilder",["FBWWWLiveStreamingClientImpl","SimpleServiceProvider","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2={},this.$4=[],this.$1=a}var c=a.prototype;c.build=function(){return new(b("FBWWWLiveStreamingClientImpl"))(this.$1,this.$2,{},b("nullthrows")(this.$3),this.$4)};c.setSessionCallbacks=function(a){this.$2=a;return this};c.setTransportCallbacks=function(a){return this};c.setMediaStream=function(a){this.$3=a;return this};c.addServiceProvider=function(a){this.$4.push(a);return this};c.addService=function(a){this.addServiceProvider(new(b("SimpleServiceProvider"))(a));return this};return a}();e.exports=a}),null);
__d("BaseEventLogWriter",["ServiceImpl"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.logAggregatableEvent=function(b,a,c){this.getInterface().logEvent(b,a,c)};return b}(b("ServiceImpl"));e.exports=a}),null);
__d("StreamingSdkEventFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("streaming_sdk_event");e.exports=a}),null);
__d("StreamingSdkMetadataFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("streaming_sdk_metadata");e.exports=a}),null);
__d("FalcoEventLogWriter",["BaseEventLogWriter","StreamingSdkEventFalcoEvent","StreamingSdkMetadataFalcoEvent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){return a[b]||0},h=function(a,b){return a[b]||""};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInterface=function(){return this};d.getServiceId=function(){return"log_writer"};d.logEvent=function(c,a,d){c==="streaming_sdk_event"?b("StreamingSdkEventFalcoEvent").log(function(){return{broadcast_id:g(d,"broadcast_id"),session_id:g(d,"session_id"),streaming_event:h(d,"streaming_event"),extra:h(d,"extra")}}):c==="streaming_sdk_metadata"&&b("StreamingSdkMetadataFalcoEvent").log(function(){return{broadcast_id:g(d,"broadcast_id"),product_extra:h(d,"extra"),num_audio_tracks:g(d,"num_audio_tracks"),num_video_tracks:g(d,"num_video_tracks")}})};return c}(b("BaseEventLogWriter"));e.exports=a}),null);
__d("StreamingSessionLogger",["regeneratorRuntime","FBLogger","Random","ServiceImpl"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="fatal_error",h="product_extra",i="num_video_tracks",j="video_tracks_info",k="num_audio_tracks",l="audio_tracks_info",m="streaming_event",n="extra",o="session_id",p="initialized",q="started",r="stopped",s="paused",t="resumed",u="uninitialized",v="error",w="cancelled",x=function(a){if(a==="PRODUCT_EXTRA")return h;if(a==="NUM_VIDEO_TRACKS")return i;if(a==="VIDEO_TRACKS_INFO")return j;if(a==="NUM_AUDIO_TRACKS")return k;return a==="AUDIO_TRACKS_INFO"?l:a};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h){__p&&__p();var i;i=a.call(this)||this;i.$SessionLogger2="";i.$SessionLogger9={};i.$SessionLogger11=!1;i.$SessionLogger12=!1;i.$SessionLogger13=!1;i.$SessionLogger1=b("Random").uint32();i.$SessionLogger3=c;i.$SessionLogger4=d;i.$SessionLogger5=e;i.$SessionLogger6=f;i.$SessionLogger7=g;i.$SessionLogger8=h;i.$SessionLogger9[x("PRODUCT_EXTRA")]=h;return i}var d=c.prototype;d.getInterface=function(){return this};d.getServiceId=function(){return"session_logger"};d.isMultiBind=function(){return!1};d.onInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$SessionLogger12=!0,this.$SessionLogger10=this.getServiceOrNull("log_writer"),this.$SessionLogger10&&this.$SessionLogger10.getInterface().logEvent(this.$SessionLogger3,"",this.$SessionLogger9),this.logStreamingEvent(p,"");case 4:case"end":return a.stop()}},null,this)};d.onStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$SessionLogger13=!0,this.logStreamingEvent(q,"");case 2:case"end":return a.stop()}},null,this)};d.onStopped=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.logStreamingEvent(r,""),this.$SessionLogger11||this.logSessionSummary(g,"");case 2:case"end":return a.stop()}},null,this)};d.onPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.logStreamingEvent(s,"");case 1:case"end":return a.stop()}},null,this)};d.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.logStreamingEvent(t,"");case 1:case"end":return a.stop()}},null,this)};d.onUninitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:!this.$SessionLogger13&&!this.$SessionLogger11&&this.logStreamingEvent(w,""),this.logStreamingEvent(u,"");case 2:case"end":return a.stop()}},null,this)};d.logMetadata=function(a,c){if(this.$SessionLogger12){b("FBLogger")("www_livestreaming").warn("No metadata is allowed after initialization, ignored for key: "+a+", value "+c.toString());return}this.$SessionLogger9[a]=c};d.logStreamingEvent=function(a,c){var d,e=this.$SessionLogger10;if(e==null){b("FBLogger")("www_livestreaming").warn("No logWriter");return}a=(d={},d[m]=a,d[n]=c,d[o]=this.$SessionLogger1,d[this.$SessionLogger7]=this.$SessionLogger2,d);e.getInterface().logEvent(this.$SessionLogger5,"",a)};d.logSessionSummary=function(a,c){var d,e=this.$SessionLogger10;if(e==null){b("FBLogger")("www_livestreaming").warn("No logWriter");return}a=(d={},d[a]=c,d[o]=this.$SessionLogger1,d[this.$SessionLogger7]=this.$SessionLogger2,d);e.getInterface().logAggregatableEvent(this.$SessionLogger6,"",a)};d.logStreamingError=function(a){a=a.toJsonString();this.logStreamingEvent(v,a);this.$SessionLogger11||(this.logSessionSummary(g,a),this.$SessionLogger11=!0)};d.getSessionId=function(){return this.$SessionLogger1};d.setBaseId=function(a){this.$SessionLogger2=a};d.getBaseId=function(){return this.$SessionLogger2};return c}(b("ServiceImpl"));e.exports=a}),null);
__d("LiveStreamingSessionLogger",["regeneratorRuntime","StreamingSessionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="streaming_sdk_metadata",h="streaming_sdk_session_config",i="streaming_sdk_event",j="broadcast_id",k="video_id",l=function(a){if(a==="BROADCAST_ID")return j;return a==="VIDEO_ID"?k:a};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){return a.call(this,g,h,i,b,j,c)||this}var d=c.prototype;d.onInitialize=function(){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=this.getServiceOrThrow("broadcast_id_provider").getInterface().getBroadcastId();this.setBaseId(c);this.logMetadata(l("BROADCAST_ID"),this.getBaseId().toString());d.next=5;return b("regeneratorRuntime").awrap(a.prototype.onInitialize.call(this));case 5:case"end":return d.stop()}},null,this)};return c}(b("StreamingSessionLogger"));e.exports=a}),null);
__d("LiveStreamingSessionLogServiceProvider",["LiveStreamingSessionLogger"],(function(a,b,c,d,e,f){"use strict";var g="streaming_sdk_session_summary";a=function(){function a(){}var c=a.prototype;c.provide=function(a){a.addService(new(b("LiveStreamingSessionLogger"))(g,""))};return a}();e.exports=a}),null);
__d("XLiveVideoUpdateBroadcastController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_broadcast/update/",{broadcast_id:{type:"FBID"},description:{type:"String"},privacyx:{type:"String"},political_district:{type:"String"},targeted_privacy_data:{type:"HackType"},title:{type:"String"},planned_start_time:{type:"Int"},is_continuous:{type:"Bool",defaultValue:!1},is_episode:{type:"Bool",defaultValue:!1},season_id:{type:"FBID"},series_id:{type:"FBID"},playlist_ids:{type:"FBIDVector"},crosspost_page_ids:{type:"FBIDVector"},breaking_news_expiration:{type:"Int"},group_join_target_id:{type:"FBID"},remove_group_join_cta:{type:"Bool",defaultValue:!1},is_commentating_disabled:{type:"Bool",defaultValue:!1},is_isr_enabled:{type:"Bool",defaultValue:!1},language:{type:"String"},thumbnail_uri:{type:"String"},broadcast_playback_mode:{type:"Enum",enumType:1},enable_event_ticket_promotion:{type:"Bool",defaultValue:!1}})}),null);
__d("LiveVideoBroadcastAfterBootloadUtils",["fbt","ActorURI","AsyncRequest","ComposerVideoPostUtils","ErrorDialog","LiveVideoBroadcastActions","LiveVideoBroadcastAPIActions","LiveVideoBroadcastUtils","ShareDialogAudienceTypes","VideoCopyrightAPI","XLiveVideoUpdateBroadcastController","expectationViolation","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c){var d="",e;d;a.audience==b("ShareDialogAudienceTypes").PAGE?(d=a.audienceTargets[0].actorId,e=a.audienceTargets[0].pageId):a.audience==b("ShareDialogAudienceTypes").OWN?(d=c||"",e=c||""):(d=a.actorId?a.actorId:"",e=a.audienceTargets[0]||d);return{actorID:d,targetID:e}}function c(){b("ErrorDialog").show(g._("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e01\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e1e"),g._("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e01\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e1e \u0e42\u0e1b\u0e23\u0e14\u0e25\u0e2d\u0e07\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07"))}function h(a){__p&&__p();var c={};if(a.selectedAttributionTag){var d=b("ComposerVideoPostUtils").getAttributionTagID(a.selectedAttributionTag);c=babelHelpers["extends"]({},c,{app_attribution_tag:d})}if(a.selectedGame){d=b("ComposerVideoPostUtils").getGameID(a.selectedGame);c=babelHelpers["extends"]({},c,{game_id:d})}if(a.selectedGroups){d=b("ComposerVideoPostUtils").getGroupIDs(a.selectedGroups);c=babelHelpers["extends"]({},c,{crossshare_group_ids:d})}if(a.videoTJApp){d=b("ComposerVideoPostUtils").getVideoTJAppID(a.videoTJApp);c=babelHelpers["extends"]({},c,{video_tj_app_id:d})}a.videoTitle&&(c=babelHelpers["extends"]({},c,{title:a.videoTitle}));if(a.contentTags){d=a.contentTags.map(function(a){return a.getUniqueID()});c=babelHelpers["extends"]({},c,{content_tags:d})}a.fundraiserGoal&&(c=babelHelpers["extends"]({},c,{fundraiser_goal:a.fundraiserGoal}));a.language&&(c=babelHelpers["extends"]({},c,{language:a.language}));a.thumbnailUpload&&(c=babelHelpers["extends"]({},c,{thumbnail_uri:a.thumbnailUpload.thumbURI}));return c}function d(a,c,d,e,f,g,j,k,l,m,n,o,p){var q=h(l),r=b("LiveVideoBroadcastUtils").getComposerFormData(f.contextConfig.composerID,f.config.targetData.targetID,f.config.contextInfo,p);!k?i(c,e,m,r,q,n,o):b("promiseDone")(b("VideoCopyrightAPI").copyrightVideo(a,b("nullthrows")(j),d,g,"live_video_composer"),function(a){i(c,e,m,r,q,n,o)},function(a){b("LiveVideoBroadcastAPIActions").errorStartingAPIBroadcast("copyright call",a)})}function i(a,c,d,e,f,g,h){c||b("expectationViolation")("cannot update broadcast without a broadcastiD");c=b("XLiveVideoUpdateBroadcastController").getURIBuilder().setFBID("broadcast_id",c).getURI();if(!a){b("expectationViolation")("cannot start broadcast without an actorID");return}c=b("ActorURI").create(c,a);new(b("AsyncRequest"))(c).setData(babelHelpers["extends"]({},d,e,f)).setHandler(g).setErrorHandler(function(a){h(),b("LiveVideoBroadcastActions").serverError(a)}).send()}f={getIDsFromTarget:a,showErrorDialog:c,updateBroadcastRequest:d,getUpdateMetadata:h,sendUpdateRequest:i};e.exports=f}),null);
__d("LiveVideoBroadcastCopyrightUtils",["LiveVideoBroadcastActions","SkywalkerManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];a={handleCopyrightEvent:function(a,c){c&&b("LiveVideoBroadcastActions").handleCopyrightEvent(a,c)},endLiveBroadcastWithCopyrightViolation:function(){b("LiveVideoBroadcastActions").setBroadcastEndedWithCopyrightViolation(),b("LiveVideoBroadcastActions").finishBroadcastRequest()},subscribeToCopyrightEvents:function(a){a=b("SkywalkerManager").subscribe("live/www/copyright/"+a,function(a){a=JSON.parse(a.payload);b("LiveVideoBroadcastActions").setCopyrightTriggered(!0);b("LiveVideoBroadcastActions").setCopyrightsViolationDialogState(a.event)});g.push(a)},unsubscribeTokens:function(){for(var a=0;a<g.length;a++){var b=g[a];b.unsubscribe()}}};e.exports=a}),null);
__d("XLiveVideoCheckIsPublishedController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live_video/check_is_published/",{broadcast_id:{type:"FBID",required:!0},end_if_unpublished:{type:"Bool",defaultValue:!1}})}),null);
__d("XLiveVideoCreateBroadcastController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/create_broadcast/create/",{app_id:{type:"Int",defaultValue:1761791807395020},target_id:{type:"FBID",required:!0},enable_content_protection:{type:"Bool",defaultValue:!1},is_360_broadcast:{type:"Bool",defaultValue:!1},is_360_audio_broadcast:{type:"Bool",defaultValue:!1},is_single_fisheye_broadcast:{type:"Bool",defaultValue:!1},single_fisheye_fov:{type:"Int",defaultValue:0},projection:{type:"Enum",enumType:1},stereoscopic_mode:{type:"Enum",enumType:1},is_rehearsal:{type:"Bool",defaultValue:!1},is_instagram_crosspost_enabled:{type:"Bool",defaultValue:!1}})}),null);
__d("XLiveVideoInitCommentsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live_video/init_comments/",{broadcast_id:{type:"FBID",required:!0},target_id:{type:"FBID",required:!0}})}),null);
__d("XLiveVideoPublishBroadcastController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live_video/publish/",{broadcast_id:{type:"FBID"},description:{type:"String"}})}),null);
__d("LiveVideoBroadcastBroadcastStore",["fbt","CollabRTCChromeScreenSharingExtension","Bootloader","DateConsts","ErrorDialog","LiveVideoBroadcastActions","LiveVideoBroadcastConstants","ActorURI","AsyncRequest","LiveVideoBroadcastDispatcher","FBRTCHangupReason","FluxMapStore","immutable","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastAfterBootloadUtils","LiveVideoBroadcastCopyrightUtils","LiveVideoBroadcastIDStore","LiveVideoBroadcastUIStore","LiveVideoBroadcastUtils","LiveVideoLiveTraceBroadcasterLogger","MediaRecorder","RTCCallActions","RTCCallStore","RTCMWProtocolHandler","RTCUtils","UFILiveStreamingComments","ThisControllerNoLongerExists","XLiveVideoCheckIsPublishedController","XLiveVideoCreateBroadcastController","XLiveVideoInitCommentsController","XLiveVideoPublishBroadcastController","LiveStreamingSessionLogServiceProvider","FalcoEventLogWriter","UserAgent","FBWWWLiveStreamingClientBuilder","FBLogger","setTimeout","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b("CollabRTCChromeScreenSharingExtension");var h=b("LiveVideoBroadcastConstants").ACTIONS,i=b("LiveVideoBroadcastConstants").BROADCAST_STATE,j=b("LiveVideoBroadcastConstants").CAMERA_DIMENSIONS,k=b("LiveVideoBroadcastConstants").CAMERA_STATE,l=b("LiveVideoBroadcastConstants").INPUT_SOURCE,m=273465416184080,n=2e3;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$LiveVideoBroadcastBroadcastStore4=!1,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({recordedChunks:[]})};d.reduce=function(a,c){__p&&__p();switch(c.type){case h.INITIALIZE:a=this.saveProps(a,c.value);break;case h.START_BROADCAST_REQUEST:a=a.set("broadcastStartTime",Date.now());var d=this.startBroadcast(c.download);c.blockRequest||this.sendLiveVideoPublishBroadcastRequest();a=a.set("recorder",d);break;case h.START_BROADCAST_SUCCESS:this.$LiveVideoBroadcastBroadcastStore6();this.$LiveVideoBroadcastBroadcastStore7();break;case h.REQUEST_UFI:this.$LiveVideoBroadcastBroadcastStore6();break;case h.ATTEMPT_RECONNECTION:d=this.get("maxFailureRetries")||0;var e=this.get("failureRetries")||0;this.attemptReconnection(e,d);a=a.set("failureRetries",e+1);break;case h.WEBRTC_CONNECTION_ESTABLISHED:a=a.set("failureRetries",0);break;case h.FINISH_BROADCAST_REQUEST:this.finishBroadcast();break;case h.GET_WEBCAM_STREAM_URL_REQUEST:if(this.$LiveVideoBroadcastBroadcastStore4)break;d=c.config&&c.config.audioInput?c.config.audioInput:a.get("selectedAudioInput");e=c.config&&c.config.videoInput?c.config.videoInput:a.get("selectedVideoInput");var f=a.get("mediaStream");f&&b("RTCUtils").stopMediaStream(f);a=a.set("selectedAudioInput",d);a=a.set("selectedVideoInput",e);this.createWebcamStreamUrl(d,e);break;case h.GET_SCREEN_STREAM_URL_REQUEST:f=c.config&&c.config.audioInput?c.config.audioInput:a.get("selectedAudioInput");a=a.set("selectedAudioInput",f);this.$LiveVideoBroadcastBroadcastStore8(f);break;case h.SCHEDULED_LIVE_SUCCESS:if(!c.shouldCloseDialog)break;case h.CLEANUP:a=this.getInitialState();this.$LiveVideoBroadcastBroadcastStore9();this.$LiveVideoBroadcastBroadcastStore10();break;case h.SET_INPUT_SOURCE:this.$LiveVideoBroadcastBroadcastStore7();break;case h.GET_WEBCAM_STREAM_URL_SUCCESS:a=a.set("selectedVideoInputSource","CAMERA");a=a.set("mediaStream",c.value.mediaStream);break;case h.GET_SCREEN_STREAM_URL_SUCCESS:a=a.set("selectedVideoInputSource","SCREEN");a=a.set("mediaStream",c.value.mediaStream);break;case h.DELETE_REPLAY_VIDEO:this.$LiveVideoBroadcastBroadcastStore11();break;case h.PREPARE_THUMBNAIL_URI:this.prepareThumbnailUri();break;case h.SET_THUMBNAIL_URI:a=a.set("thumbnailUri",c.value);break;case h.ERROR_TIME_OUT_WAITING_FOR_PUBLISH:case h.ERROR_TRACK_ENDED:this.finishBroadcast();break;case h.SET_TARGET:a=a.set("broadcastId",null);a=a.set("actorID",null);a=a.set("targetID",null);this.$LiveVideoBroadcastBroadcastStore12(a,c.value);break;case h.CLEAR_BROADCAST_ID:a=a.set("broadcastId",null);a=a.set("actorID",null);a=a.set("targetID",null);break;case h.SET_BROADCAST_ID:a=a.set("broadcastId",c.value);break;case h.SET_VIDEO_ID:a=a.set("videoId",c.value);break;case h.SET_CONTENT_PROTECTION_ENABLED:case h.SET_IS_360_VIDEO:case h.SET_IS_360_AUDIO:case h.SET_IS_SINGLE_FISHEYE:case h.SET_SINGLE_FISHEYE_FOV:case h.UPDATE_360_CONFIGURATION:case h.SET_IS_REHEARSAL:this.$LiveVideoBroadcastBroadcastStore13();break;case h.UPDATE_UI_CONFIG:c.values.broadcastId&&(a.get("broadcastId")==null&&c.values.broadcastId!=null&&b("LiveVideoLiveTraceBroadcasterLogger").logCreateEvent(c.values.broadcastId,m,this.$LiveVideoBroadcastBroadcastStore14()?"dash":"rtc"),a=a.set("broadcastId",c.values.broadcastId));c.values.videoId&&(a=a.set("videoId",c.values.videoId));c.values.viewerID&&(a=a.set("viewerID",c.values.viewerID));c.values.feedbackID&&(a=a.set("feedbackID",c.values.feedbackID));c.values.targetID&&(a=a.set("targetID",c.values.targetID));c.values.actorID&&(a=a.set("actorID",c.values.actorID));c.values.formData&&(a=a.set("formData",c.values.formData));c.values.streamSettings&&(a=a.set("streamSettings",c.values.streamSettings));c.values.maxFailureRetries&&(a=a.set("maxFailureRetries",c.values.maxFailureRetries));c.values.retryTimeoutSeconds&&(a=a.set("retryTimeoutSeconds",c.values.retryTimeoutSeconds));c.values.speedTestConfig&&(a=a.set("speedTestConfig",c.values.speedTestConfig));c.values.webRTCLoggingFreq&&(a=a.set("webRTCLoggingFreq",c.values.webRTCLoggingFreq));c.values.gks&&(a=a.set("vp8",c.values.gks.live_www_broadcasting_vp8_encoding));c.values.accountID&&(a=a.set("accountID",c.values.accountID));c.values.isCrosspost&&(a=a.set("isCrosspost",c.values.isCrosspost));c.values.scheduledLiveCrosspostPayload&&(a=a.set("scheduledLiveCrosspostPayload",c.values.scheduledLiveCrosspostPayload));c.values.dashIngestUri&&(a=a.set("dashIngestUri",c.values.dashIngestUri));c.values.speedTestUri&&(a=a.set("speedTestUri",c.values.speedTestUri));break;default:break}return a};d.saveProps=function(a,b){return a.set("failureRetries",0).set("vp8",b.vp8).set("formData",b.formData)};d.$LiveVideoBroadcastBroadcastStore13=function(){b("LiveVideoBroadcastDispatcher").waitFor([b("LiveVideoBroadcastAPIBroadcastStore").getDispatchToken()]);var a=this.get("actorID"),c=this.get("targetID");a&&c&&this.$LiveVideoBroadcastBroadcastStore15(a,c)};d.$LiveVideoBroadcastBroadcastStore15=function(a,c){__p&&__p();var d=this;this.$LiveVideoBroadcastBroadcastStore2&&this.$LiveVideoBroadcastBroadcastStore2.abandon();var e=b("LiveVideoBroadcastAPIBroadcastStore").getState().toObject(),f=e.is360Audio,g=e.is360Video,h=e.isContentProtectionEnabled,i=e.isSingleFisheye,j=e.singleFisheyeFOV,k=e.sphericalConfigSelectorValue,l=e.isRehearsal;e="equirectangular";var n="mono";k&&(e=k.getAuxiliaryData().projection,n=k.getAuxiliaryData().stereoMode);k=b("XLiveVideoCreateBroadcastController").getURIBuilder().setInt("app_id",m).setFBID("target_id",String(c)).setBool("enable_content_protection",h).setBool("is_360_broadcast",g).setBool("is_rehearsal",l);g&&(k=k.setBool("is_360_audio_broadcast",f).setBool("is_single_fisheye_broadcast",i).setInt("single_fisheye_fov",j).setEnum("projection",e).setEnum("stereoscopic_mode",n));k=k.getURI();k=b("ActorURI").create(k,a);this.$LiveVideoBroadcastBroadcastStore2=new(b("AsyncRequest"))(k).setData({video_broadcast_infra_type:"RTMP"}).setHandler(function(e){d.$LiveVideoBroadcastBroadcastStore2=null,b("LiveVideoBroadcastActions").apiBroadcastCreated(a||"",e.payload.id,{primaryStreamURL:e.payload.stream_url,primarySecureStreamURL:e.payload.secure_stream_url,backupStreamURL:e.payload.backup_stream_url,backupSecureStreamURL:e.payload.backup_secure_stream_url},e.payload.video_id,c||"",e.payload.embed_html,"",l===!0,e.payload.allow_unsecure_rtmp)}).setMethod("POST");this.$LiveVideoBroadcastBroadcastStore2.send()};d.$LiveVideoBroadcastBroadcastStore12=function(a,c){__p&&__p();var d=this;c=b("LiveVideoBroadcastAfterBootloadUtils").getIDsFromTarget(c,a.get("accountID"));var e=c.actorID,f=c.targetID;a=a.set("actorID",e);a=a.set("targetID",f);c=3e4;this.$LiveVideoBroadcastBroadcastStore1&&this.$LiveVideoBroadcastBroadcastStore1.abandon();var g=b("XLiveVideoCreateBroadcastController").getURIBuilder().setFBID("target_id",f).getURI();g=b("ActorURI").create(g,e);this.$LiveVideoBroadcastBroadcastStore1=new(b("AsyncRequest"))(g).setHandler(function(a){d.$LiveVideoBroadcastBroadcastStore1=null;var c=b("LiveVideoBroadcastUIStore").get("composerConfig");if(!c){b("LiveVideoBroadcastUtils").handleCreateBroadcastError({error:"No broadcast config"});return}var g=b("LiveVideoBroadcastUtils").getComposerFormData(c.contextConfig.composerID,f,c.config.contextInfo);b("LiveVideoBroadcastUtils").fetchUIConfig(e,f,a.payload.id,c.contextConfig.composerType,g)}).setErrorHandler(b("LiveVideoBroadcastUtils").handleCreateBroadcastError).setMethod("POST").setTimeoutHandler(c,b("LiveVideoBroadcastUtils").handleCreateBroadcastError);this.$LiveVideoBroadcastBroadcastStore1.send();this.$LiveVideoBroadcastBroadcastStore15(e,f);return a};d.$LiveVideoBroadcastBroadcastStore16=function(a){__p&&__p();var c=a.getAudioTracks();if(c.length===0){b("RTCUtils").stopMediaStream(a);b("LiveVideoBroadcastActions").updateCameraState(k.MICROPHONE_NOT_FOUND);return!1}c=a.getVideoTracks();if(c.length===0){b("RTCUtils").stopMediaStream(a);b("LiveVideoBroadcastActions").updateCameraState(k.CAMERA_NOT_FOUND);return!1}c[0].readyState==="ended"&&b("LiveVideoBroadcastActions").readyStateEnded();return!0};d.$LiveVideoBroadcastBroadcastStore8=function(a){__p&&__p();var c=this,d=function(a){__p&&__p();if(!c.$LiveVideoBroadcastBroadcastStore16(a))return;b("RTCCallActions").removeAllLocalStreams(!0);b("RTCCallActions").removeAllLocalScreenStreams(!0);b("RTCCallActions").addLocalScreenStream(a);b("LiveVideoBroadcastActions").getScreenStreamUrlSuccess({mediaStream:a});b("LiveVideoBroadcastActions").updateCameraState(k.BROADCAST);a=a.getVideoTracks();a[0].addEventListener("ended",function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.broadcastState;a===i.LIVE?c.finishBroadcast():b("LiveVideoBroadcastActions").getWebcamStreamUrlRequest()});c.$LiveVideoBroadcastBroadcastStore3=a[0].getSettings().height};a=this.$LiveVideoBroadcastBroadcastStore17(a);var e={audio:a,video:!1},f=b("RTCCallStore").getState().localUser.getScreenStream();return f?b("RTCUtils").getUserMedia(e).then(function(a){__p&&__p();for(var b=f.getAudioTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;f.removeTrack(e)}f.addTrack(a.getAudioTracks()[0]);return f})["catch"](function(a){b("LiveVideoBroadcastActions").errorMediaValidation(a,!0)}):b("RTCUtils").getUserScreenMedia({audio:!1,video:{frameRate:{ideal:5,max:15},height:{exact:1080},mediaSource:"screen",width:{max:1920}}},"live_broadcast").then(function(a){return b("RTCUtils").getUserMedia(e).then(function(b){a.addTrack(b.getAudioTracks()[0]);return a})}).then(d)["catch"](function(a){b("LiveVideoBroadcastActions").errorMediaValidation(a,!0)})};d.createWebcamStreamUrl=function(a,c){__p&&__p();var d=this;this.$LiveVideoBroadcastBroadcastStore4=!0;var e={width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},aspectRatio:{ideal:j.SIXTEEN_NINE},frameRate:{ideal:30,max:30}};a=this.$LiveVideoBroadcastBroadcastStore17(a);var f=this.$LiveVideoBroadcastBroadcastStore14(),g=this.get("streamSettings");!f&&g&&g.simpleConstaints?e={height:{ideal:368},aspectRatio:{ideal:j.SIXTEEN_NINE}}:!f&&g&&g.firefoxSimpleConstraints?e={height:720,aspectRatio:j.SIXTEEN_NINE}:(g==null?void 0:g.isLiveCommentating)&&(e={width:{min:480,ideal:720,max:1080},height:{min:480,ideal:720,max:1080},aspectRatio:{ideal:j.ONE_ONE}});c&&(e=babelHelpers["extends"]({},e,{deviceId:c}));f={audio:a,video:e};g=function(a){__p&&__p();d.$LiveVideoBroadcastBroadcastStore4=!1;var c=b("LiveVideoBroadcastUIStore").get("shouldBeClosed");if(c){b("RTCUtils").stopMediaStream(a);return}if(!d.$LiveVideoBroadcastBroadcastStore16(a))return;b("RTCCallActions").removeAllLocalStreams(!0);b("RTCCallActions").removeAllLocalScreenStreams(!0);b("RTCCallActions").addLocalStream(a);b("LiveVideoBroadcastActions").getWebcamStreamUrlSuccess({mediaStream:a});b("LiveVideoBroadcastActions").updateCameraState(k.BROADCAST);c=a.getVideoTracks();c[0].addEventListener("ended",function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.broadcastState;a===i.LIVE&&b("LiveVideoBroadcastActions").errorTrackEnded()});d.$LiveVideoBroadcastBroadcastStore3=c[0].getSettings().height};return this.$LiveVideoBroadcastBroadcastStore18(f).then(g)["catch"](function(a){d.$LiveVideoBroadcastBroadcastStore4=!1;b("LiveVideoBroadcastActions").errorMediaValidation(a,!0);var c=a.name==="NotAllowedError"||a.name==="PermissionDismissedError";c=c?k.CAMERA_NOT_ALLOWED:k.CAMERA_NOT_FOUND;b("LiveVideoBroadcastActions").updateCameraState(c,a)})};d.$LiveVideoBroadcastBroadcastStore17=function(a){var b={echoCancellation:!1,channelCount:2,deviceId:a},c=this.$LiveVideoBroadcastBroadcastStore14(),d=this.get("streamSettings");!c&&d&&d.simpleConstaints&&(b={deviceId:a});return b};d.$LiveVideoBroadcastBroadcastStore18=function(a){return b("RTCUtils").getUserMedia(a)};d.$LiveVideoBroadcastBroadcastStore19=function(a){var b=this.get("recordedChunks");b&&a&&a.data.size>0&&b.push(a.data)};d.$LiveVideoBroadcastBroadcastStore9=function(){var a=this.get("mediaStream");a&&b("RTCUtils").stopMediaStream(a)};d.$LiveVideoBroadcastBroadcastStore10=function(){var a=this.get("videoId");if(!a)return;b("UFILiveStreamingComments").stop(a)};d.$LiveVideoBroadcastBroadcastStore14=function(){return!!b("qex")._("1241427")};d.startBroadcast=function(a){var b=this.get("streamSettings");!(b==null?void 0:b.isLiveCommentating)&&this.$LiveVideoBroadcastBroadcastStore14()?this.$LiveVideoBroadcastBroadcastStore20():this.$LiveVideoBroadcastBroadcastStore21(a)};d.$LiveVideoBroadcastBroadcastStore20=function(){__p&&__p();var a=this.get("broadcastId"),c=this.get("dashIngestUri"),d=this.get("speedTestUri"),e=this.get("mediaStream");if(a==null||c==null||d==null||e==null){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").errorBroadcastCouldNotStart()},0);return}c={broadcastID:a,transportConfig:{downloadRequestBlobs:!1,dashIngestUri:c,speedTestConfig:{speedTestPayloadSizeBytes:1e5,maxTestDurationMs:1e4,maxConcurrentRequests:1,maxTotalRequests:10,speedTestUrl:d,speedTestMinimumBandwidthThreshold:1e5,percentOfEstimatedBitrateToUse:.5},backOffFactor:2,retryDelayMs:500,maxAttempts:3},mediaRecorderConfig:{codec:"video/webm; codecs="+(b("UserAgent").isBrowser("Chrome")?"vp9":"vp8")+",opus",maxVideoBitrate:4e6,maxAudioBitrate:128e3,chunkSizeInMs:1e3}};d=new(b("FalcoEventLogWriter"))();var f=new(b("LiveStreamingSessionLogServiceProvider"))();this.$LiveVideoBroadcastBroadcastStore5=new(b("FBWWWLiveStreamingClientBuilder"))(c).setSessionCallbacks({onStarted:function(){b("LiveVideoLiveTraceBroadcasterLogger").logBeginEvent(a)},onInitialized:function(){},onPaused:function(){},onResumed:function(){},onStopped:this.$LiveVideoBroadcastBroadcastStore22.bind(this),onReleased:function(){},onError:function(c){b("LiveVideoLiveTraceBroadcasterLogger").logErrorEvent(a,{e:c.description,what:c.what,code:c.code}),b("FBLogger")("www_livestreaming").warn(c.toString()),b("LiveVideoBroadcastActions").errorWWWSDKClientError()}}).setMediaStream(e).addService(d).addServiceProvider(f).build();this.$LiveVideoBroadcastBroadcastStore5.start()};d.$LiveVideoBroadcastBroadcastStore21=function(a){__p&&__p();var c=this,d=this.get("broadcastId");if(d==null){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").errorBroadcastCouldNotStart()},0);return}b("LiveVideoLiveTraceBroadcasterLogger").logBeginEvent(d);var e=this.get("streamSettings"),f=this.get("vp8")?{video:"VP8/90000"}:{video:"H264/90000"};b("RTCCallActions").addListener("onIceConnectionStateChange",function(a){a==="disconnected"?b("LiveVideoBroadcastActions").errorConnectionBroken():a==="connected"?b("LiveVideoBroadcastActions").webRTCConnectionEstablished():b("LiveVideoBroadcastActions").iceConnectionStateChanged(a),a==="failed"&&b("LiveVideoBroadcastActions").attemptReconnection()});var g={};e&&(g={"H264/90000":{"x-google-start-bitrate":e.initialBitrate},"opus/48000/2":{minaveragebitrate:e.minAudioBitrate,maxaveragebitrate:e.maxAudioBitrate},"VP8/90000":e.maxVideoBitrate?{"x-google-max-bitrate":e.maxVideoBitrate}:{}});var h=b("RTCCallStore").getState();h=h.localUser;h=[].concat(h.streams.toArray(),h.screenStreams.toArray());var i=void 0;e&&e.firefoxSimpleConstraints&&(i=function(a){var b=c.$LiveVideoBroadcastBroadcastStore3?c.$LiveVideoBroadcastBroadcastStore3/360:1;a.setParameters(babelHelpers["extends"]({},a.getParameters(),{encodings:[{maxBitrate:1e6,scaleResolutionDownBy:b}]}))});e=new(b("RTCMWProtocolHandler"))(null,!0);e.startCall([],h,"LIVE:"+d,{addStreamCallback:i,callTrigger:"live_video",formatParameters:g,preferredCodecs:f});b("LiveVideoBroadcastCopyrightUtils").subscribeToCopyrightEvents(d);e=Math.max(b("LiveVideoBroadcastConstants").PUBLISH_FAILURE_TIMEOUT_S-5,0);b("setTimeout")(function(){return c.$LiveVideoBroadcastBroadcastStore23()},e*b("DateConsts").MS_PER_SEC);h=null;if(a){i=this.get("mediaStream");g={mimeType:"video/webm; codecs=vp9"};h=new(b("MediaRecorder"))(i,g);h.ondataavailable=function(a){return c.$LiveVideoBroadcastBroadcastStore19(a)};h.start()}return h};d.sendLiveVideoPublishBroadcastRequest=function(){__p&&__p();var a=this.get("broadcastId");a=b("XLiveVideoPublishBroadcastController").getURIBuilder().setFBID("broadcast_id",a);a=b("ActorURI").create(a.getURI(),this.get("actorID"));var c=this.get("formData"),d=b("LiveVideoBroadcastUIStore").getState().toObject();d=d.composerConfig;if(d){d=b("LiveVideoBroadcastUtils").getComposerFormData(d.contextConfig.composerID,d.contextConfig.targetID,d.config.contextInfo);for(var e in c)d[e]!==null&&(c[e]=d[e])}new(b("AsyncRequest"))().setURI(a).setData(c).setHandler(function(){return b("LiveVideoBroadcastActions").startLiveBroadcastSuccess()}).setErrorHandler(function(a){return b("LiveVideoBroadcastActions").errorBroadcastCouldNotStart()}).send()};d.attemptReconnection=function(a,c){__p&&__p();var d=b("LiveVideoBroadcastUIStore").getState().toObject(),e=d.connectionBroken;d=d.broadcastState;if(a<c&&d===i.LIVE&&e){a=this.get("broadcastId");if(a!=null){c=new(b("RTCMWProtocolHandler"))();c.iceRestart("LIVE:"+a,b("RTCCallStore").getState().callInfo.serverInfoData)}b("setTimeout")(function(){return b("LiveVideoBroadcastActions").attemptReconnection()},(this.get("retryTimeoutSeconds")||b("LiveVideoBroadcastConstants").DEFAULT_RETRY_TIMEOUT_SECONDS)*1e3)}else e&&b("setTimeout")(function(){return b("LiveVideoBroadcastActions").errorConnectionFailed()},1)};d.$LiveVideoBroadcastBroadcastStore23=function(a){__p&&__p();var c=this,d=this.get("broadcastId")||"";a=a?b("LiveVideoBroadcastConstants").PUBLISH_FAILURE_TIMEOUT_S*1.5:b("LiveVideoBroadcastConstants").PUBLISH_FAILURE_TIMEOUT_S;var e=this.getCurrentBroadcastTime()>a;a=b("XLiveVideoCheckIsPublishedController").getURIBuilder().setFBID("broadcast_id",d).setBool("end_if_unpublished",e).getURI();var f=function(a,d){var f=b("LiveVideoBroadcastUIStore").getState().toObject();f=f.broadcastState;if(f===i.FINISHED)return;f=a.payload;f.is_published||(e?b("LiveVideoBroadcastActions").errorTimeOutWaitingForPublish("CLIENT"):b("setTimeout")(function(){c.$LiveVideoBroadcastBroadcastStore23(d)},n))};new(b("AsyncRequest"))().setURI(a).setHandler(function(a){return f(a,!1)}).setErrorHandler(function(a){return f(a,!0)}).send()};d.$LiveVideoBroadcastBroadcastStore6=function(){__p&&__p();var a=b("LiveVideoBroadcastIDStore").get("broadcastID"),c=this.get("targetID");if(!a||!c){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").requestUFI()},n);return}a=b("XLiveVideoInitCommentsController").getURIBuilder().setFBID("broadcast_id",a).setFBID("target_id",c);c=b("ActorURI").create(a.getURI(),this.get("actorID"));a=function(a){a=a.payload;if(!a.success){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").requestUFI()},n);return}b("LiveVideoBroadcastActions").updateBroadcastUIConfig({feedbackID:a.feedbackID})};new(b("AsyncRequest"))().setURI(c).setHandler(a).setErrorHandler(a).send()};d.$LiveVideoBroadcastBroadcastStore7=function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.inputSource;a!==l.CAMERA&&this.$LiveVideoBroadcastBroadcastStore9()};d.$LiveVideoBroadcastBroadcastStore22=function(){var a=this.get("broadcastId");a!=null&&b("LiveVideoLiveTraceBroadcasterLogger").logEndEvent(a);var c=this.get("videoId");b("Bootloader").loadModules(["ModernLiveVideoEndMutation","RelayFBEnvironment"],function(a,d){var e=this;a.commit(d,{videoID:c},{onCompleted:function(){b("LiveVideoBroadcastActions").finishBroadcastSuccess()},onError:function(a){b("LiveVideoBroadcastActions").errorEndBroadcastMutationFail(a),e.$LiveVideoBroadcastBroadcastStore24()}})},"LiveVideoBroadcastBroadcastStore")};d.finishBroadcast=function(){__p&&__p();var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.inputSource;if(a!==l.CAMERA)return;var c=this.get("broadcastId"),d=this.get("videoId");if(c==null||d==null){this.$LiveVideoBroadcastBroadcastStore24();b("setTimeout")(function(){return b("LiveVideoBroadcastActions").errorEndBroadcastMutationFail("No broadcast ID")},0);return}this.$LiveVideoBroadcastBroadcastStore14()&&this.$LiveVideoBroadcastBroadcastStore5?this.$LiveVideoBroadcastBroadcastStore5.stop():(b("setTimeout")(function(){return b("RTCCallActions").removeAllLocalStreams(!0)},0),b("setTimeout")(function(){b("RTCMWProtocolHandler").endCall("LIVE:"+c,b("RTCCallStore").getState().callInfo.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL,"User ending live stream"),b("Bootloader").loadModules(["ModernLiveVideoEndMutation","RelayFBEnvironment"],function(a,c){var e=this;a.commit(c,{videoID:d},{onCompleted:function(){b("LiveVideoBroadcastActions").finishBroadcastSuccess()},onError:function(a){b("LiveVideoBroadcastActions").errorEndBroadcastMutationFail(a),e.$LiveVideoBroadcastBroadcastStore24()}})},"LiveVideoBroadcastBroadcastStore")},1e3*3));a=this.get("recorder");var e=this.get("recordedChunks");if(a&&e){a.stop();a=new Blob(e,{type:"video/webm"});e=URL.createObjectURL(a);a=document.createElement("a");document.body&&(document.body.appendChild(a),a.style.cssText="display: none",a.href=e,a.download="test.webm",a.click(),window.URL.revokeObjectURL(e))}};d.$LiveVideoBroadcastBroadcastStore11=function(){var a=this.get("videoId");a&&this.deleteVideo(a)};d.deleteVideo=function(a){new(b("AsyncRequest"))().setURI("/ajax/video/actions/delete/").setData({fbid:a,redirect:!1}).setHandler(function(a){}).send()};d.prepareThumbnailUri=function(){this.get("videoId")||"";var a=b("ThisControllerNoLongerExists").__DEADURI__("5g1c01ti");new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){return b("LiveVideoBroadcastActions").setThumbnailUri(a.getPayload())}).send()};d.getCurrentBroadcastTime=function(){var a=this.get("broadcastStartTime");return typeof a==="number"?Math.floor((Date.now()-a)/1e3):0};d.$LiveVideoBroadcastBroadcastStore24=function(){b("ErrorDialog").show(g._("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e34\u0e49\u0e19\u0e2a\u0e38\u0e14\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e1e"),g._("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e34\u0e49\u0e19\u0e2a\u0e38\u0e14\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e1e \u0e42\u0e1b\u0e23\u0e14\u0e25\u0e2d\u0e07\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07"))};return c}(b("FluxMapStore"));a.__moduleID=e.id;e.exports=new a(b("LiveVideoBroadcastDispatcher"))}),null);
__d("LiveVideoBroadcastIDStore",["FluxDerivedStore","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastDispatcher","LiveVideoBroadcastUIStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getStores=function(){return[b("LiveVideoBroadcastAPIBroadcastStore"),b("LiveVideoBroadcastBroadcastStore"),b("LiveVideoBroadcastUIStore")]};d.__getData=function(a){a=b("LiveVideoBroadcastUIStore").get("inputSource");var c=b("LiveVideoBroadcastAPIBroadcastStore").getState().toObject(),d=c.apiBroadcastID;c=c.apiVideoID;var e=b("LiveVideoBroadcastBroadcastStore").getState().toObject();return{inputSource:a,apiBroadcastID:d,apiVideoID:c,cameraBroadcastID:e.broadcastId,cameraVideoID:e.videoId}};d.__computeResult=function(a,b){if(b.inputSource==="CAMERA"||b.inputSource==="EDIT")switch(a){case"broadcastID":return b.cameraBroadcastID;case"videoID":return b.cameraVideoID}if(b.inputSource==="API"||b.inputSource==="VIDEO_GAME"||b.inputSource==="EDIT_SCHEDULE")switch(a){case"broadcastID":return b.apiBroadcastID;case"videoID":return b.apiVideoID}return null};return c}(b("FluxDerivedStore"));a.__moduleID=e.id;e.exports=new a(b("LiveVideoBroadcastDispatcher"))}),null);
__d("ComposerVideoShowsState",["immutable"],(function(a,b,c,d,e,f){"use strict";a={composerID:null,isEpisode:null,isRecap:!1,shouldShowPlaylistSelector:!1,playlistIDs:[],seasonID:null,seriesID:null,playlistOptions:{},seasonOptions:{},seriesOptionsMap:b("immutable").Map(),seriesToSeasonOptionsMap:b("immutable").Map()};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("ComposerVideoShowsStore",["AsyncRequest","AsyncTypedRequest","ComposerVideoShowsActions","ComposerVideoShowsActionTypes","ComposerVideoShowsDispatcher","ComposerVideoShowsState","ComposerVideoUploadActions","FluxReduceStore","LiveVideoBroadcastActions","PageContentTabShowsStore","ReactComposerLiveBroadcastPreviewActions","XPagesVideoListsController","XVideoComposerBootloadEditDistributionTabController","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("ComposerVideoShowsState"))()};d.initialize=function(a,c,d){__p&&__p();this.getState().composerID===a&&d?(d=this.getState(),d=d.set("shouldShowPlaylistSelector",!0)):(d=this.getInitialState(),d=d.set("composerID",a),d=d.set("shouldShowPlaylistSelector",!1));c==="page_content_tab_season_details"&&(d=d.set("isEpisode",!0),d=d.set("seasonID",b("PageContentTabShowsStore").getVideoListID()||null));if(c==="page_content_tab_playlist_details"){a=b("PageContentTabShowsStore").getVideoListID();d=d.set("playlistIDs",a?[a]:[]);d=d.set("shouldShowPlaylistSelector",!0)}(c==="shows_home_episodes_card"||c==="page_composer_episode_card")&&(d=d.set("isEpisode",!0));c==="live_broadcast"&&(d=d.set("shouldShowPlaylistSelector",!0));return d};d.reduce=function(a,c){__p&&__p();switch(c.type){case b("ComposerVideoShowsActionTypes").INITIALIZE:a=this.initialize(c.composerID,c.composerEntryPoint,c.isEditing);this.$ComposerVideoShowsStore1(a);break;case b("ComposerVideoShowsActionTypes").SET_IS_EPISODE:a=a.set("isEpisode",c.isEpisode);c.isEpisode||(a=a.set("seriesID",null),a=a.set("seasonID",null));this.$ComposerVideoShowsStore1(a);break;case b("ComposerVideoShowsActionTypes").SET_PLAYLISTS:a=a.set("playlistIDs",c.playlistIDs);this.$ComposerVideoShowsStore1(a);break;case b("ComposerVideoShowsActionTypes").SET_SEASON:a=a.set("seasonID",c.seasonID);this.$ComposerVideoShowsStore1(a);break;case b("ComposerVideoShowsActionTypes").SET_SERIES:a=a.set("seriesID",c.seriesID);this.$ComposerVideoShowsStore1(a);break;case b("ComposerVideoShowsActionTypes").SET_SERIES_AND_SEASON_OPTIONS:a=a.set("seriesToSeasonOptionsMap",c.seriesToSeasonOptionsMap);a=a.set("seriesOptionsMap",c.seriesOptionsMap);return a;case b("ComposerVideoShowsActionTypes").LOAD_EPISODE_DATA:a=this.initialize(c.composerID,"",!0);a=a.set("isEpisode",c.isEpisode);a=a.set("seasonID",c.seasonID);a=a.set("seriesID",c.seriesID);a=a.set("playlistIDs",c.playlistIDs);this.$ComposerVideoShowsStore1(a);break;case b("ComposerVideoShowsActionTypes").SET_PLAYLIST_OPTIONS:return a.set("playlistOptions",c.value);case b("ComposerVideoShowsActionTypes").SET_SEASON_OPTIONS:return a.set("seasonOptions",c.value);case b("ComposerVideoShowsActionTypes").REQUEST_VIDEO_LIST_OPTIONS:this.$ComposerVideoShowsStore2(c.pageID);break;case b("ComposerVideoShowsActionTypes").REQUEST_SHOWS_V2_VIDEO_DATA:this.$ComposerVideoShowsStore3(c.videoID);break}return a};d.$ComposerVideoShowsStore1=function(a){b("ComposerVideoUploadActions").updateEpisodeData(a.get("composerID"),{isEpisode:a.get("isEpisode"),seasonID:a.get("seasonID"),seriesID:a.get("seriesID"),playlistIDs:a.get("playlistIDs"),isRecap:a.get("isRecap")}),b("ReactComposerLiveBroadcastPreviewActions").setEpisodeData(a.get("composerID"),{isEpisode:a.get("isEpisode"),seasonID:a.get("seasonID"),seriesID:a.get("seriesID"),playlistIDs:a.get("playlistIDs"),isRecap:!1}),b("LiveVideoBroadcastActions").setEpisodeData({isEpisode:a.get("isEpisode"),seasonID:a.get("seasonID"),seriesID:a.get("seriesID"),playlistIDs:a.get("playlistIDs"),isRecap:!1})};d.$ComposerVideoShowsStore2=function(a){a=b("XPagesVideoListsController").getURIBuilder().setFBID("page_id",a).getURI();new(b("AsyncTypedRequest"))(a).setReplaceTransportMarkers().setPayloadHandler(function(a){var c=a.seasonOptions||{},d=a.playlistOptions||{},e=a.seriesOptionsMap||b("immutable").Map();a=a.seriesToSeasonOptionsMap||b("immutable").Map();b("ComposerVideoShowsActions").setSeriesAndSeasonOptions(e,a);b("ComposerVideoShowsActions").setSeasonOptions(c);b("ComposerVideoShowsActions").setPlaylistOptions(d)}).send()};d.$ComposerVideoShowsStore3=function(a){a=b("XVideoComposerBootloadEditDistributionTabController").getURIBuilder().setFBID("video_id",a).getURI();new(b("AsyncRequest"))(a).setHandler(function(a){if(a.payload.showsV2EpisodeData!=null){a=a.payload.showsV2EpisodeData;a.season_id!=null&&b("ComposerVideoShowsActions").setSeason(String(a.season_id));b("ComposerVideoShowsActions").setSeries(String(a.show_id))}}).setErrorHandler(function(a){}).send()};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("ComposerVideoShowsDispatcher"))}),null);
__d("XLiveVideoBroadcastMaybeLaunchEndScreenSurveyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/live/broadcast/end_screen_survey/",{broadcast_id:{type:"FBID",required:!0}})}),null);
__d("LiveVideoBroadcastUIStore",["fbt","AsyncRequest","ComposerVideoShowsActions","ComposerVideoShowsDispatcher","ComposerVideoShowsStore","ErrorDialog","FluxMapStore","LiveVideoBroadcastAfterBootloadUtils","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastConstants","LiveVideoBroadcastDispatcher","ReactComposerActions","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerFundraiserAttachmentActions","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerType","ReactDOM","VideoBroadcastFlowTypes","XLiveVideoBroadcastMaybeLaunchEndScreenSurveyController","ge","gkx","immutable","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VideoBroadcastFlowTypes").BroadcastPlaybackMode,i=(a=b("LiveVideoBroadcastConstants")).ACTIONS,j=a.BROADCAST_STATE,k=a.CAMERA_STATE,l=a.INPUT_SOURCE,m=a.ENCODER_TYPE,n=a.RHC_TAB_TYPE;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({broadcastCouldNotStart:!1,broadcastCouldNotPublish:!1,broadcastState:j.PREVIEW,cameraState:k.CHECK_CAMERA_ACCESS,canSeeCopyrightOption:!1,canSeeDisturbingOptions:!1,countdownTime:null,connectionBroken:!1,connectionFailed:!1,dialog:null,dialogContainerID:null,composerConfig:null,isCommentatingDisabled:!1,isIsrEnabled:!1,broadcastPlaybackMode:h.NORMAL_LATENCY,isOnline:!0,isUpdateRequestPending:!1,showNUX:!1,showReplay:!1,startTime:0,wasEverOffline:!1,ufiConfig:{},ufiMarkup:null,isDescriptionExpanded:!1,warnOnExit:!0,tagList:null,pendingCleanup:!1,peopleTaggerSource:null,inputSource:l.CAMERA,isScheduledLiveRequestPending:!1,showSaveChangesDialog:!1,showJoinGroupCTA:!1,sponsorEnabled:!1,sponsorConfig:null,isDialogLoading:!1,hideInputToggle:!1,shouldBeClosed:!0,canEndLiveVideo:!1,canEnableLiveCoverVideo:!1,isLiveCoverVideoEnabled:!1,selectedEncoderType:m.STREAM_KEY,selectedRHCTab:n.POST,isRewindEnabled:!1,canEnableRewind:!1,commentModes:[],isFundraiserSelected:!1,enableWasLivePollVoting:!1,canSeeWasLiveVotingToggle:!1,hasCreatedPollRecently:!1,videoPollWWWPlacement:"top_right",rightsManagerVersion:null,enableEventTicketPromotion:!1})};d.reduce=function(a,c){__p&&__p();switch(c.type){case i.SHOW_REPLAY:a=a.set("showReplay",!0);break;case i.SET_UPDATE_REQUEST_PENDING:a=a.set("isUpdateRequestPending",c.value);break;case i.UPDATE_CAMERA_STATE:a=a.set("cameraState",c.value);break;case i.UPDATE_COUNTDOWN:a=a.set("countdownTime",c.value);break;case i.FINISH_COUNT_DOWN:a=a.set("startTime",Date.now());a=a.set("broadcastState",j.READY_TO_LIVE);a=a.set("countdownTime",null);break;case i.API_GO_LIVE_CLICKED:a=a.set("startTime",Date.now());break;case i.START_BROADCAST_SUCCESS:a=a.set("broadcastState",j.LIVE);a=a.set("countdownTime",null);a=this.$LiveVideoBroadcastUIStore1(a);break;case i.START_LIVE_COUNTDOWN:a=a.set("countdownTime",b("LiveVideoBroadcastConstants").COUNTDOWN_START_TIME);break;case i.CANCEL_LIVE_COUNTDOWN:a=a.set("countdownTime",null);break;case i.FINISH_BROADCAST_REQUEST:a=a.set("broadcastState",j.FINISHING);break;case i.FINISH_BROADCAST_SUCCESS:a=a.set("broadcastState",j.FINISHED);a=a.set("showReplay",!0);var d=b("LiveVideoBroadcastBroadcastStore").get("broadcastId");d=b("XLiveVideoBroadcastMaybeLaunchEndScreenSurveyController").getURIBuilder().setFBID("broadcast_id",d).getURI();new(b("AsyncRequest"))().setURI(d).setMethod("GET").setReadOnly(!0).send();break;case i.API_BROADCAST_STOPPED:a=a.set("broadcastState",j.FINISHED);a=a.set("showReplay",!0);break;case i.ERROR_CONNECTION_BROKEN:a=a.set("connectionBroken",!0);break;case i.ERROR_CONNECTION_FAILED:a=a.set("connectionFailed",!0);break;case i.WEBRTC_CONNECTION_ESTABLISHED:a=a.set("connectionBroken",!1);break;case i.ERROR_BROADCAST_COULD_NOT_START:a=a.set("broadcastCouldNotStart",!0);break;case i.ERROR_BROADCAST_PUBLISH_FAIL:case i.ERROR_TIME_OUT_WAITING_FOR_PUBLISH:case i.ERROR_MWS_BAD_AUDIO_OR_VIDEO_DATA:case i.ERROR_RTC_CLIENT_ERROR:case i.ERROR_WWWSDK_CLIENT_ERROR:case i.ERROR_TRACK_ENDED:a=a.set("broadcastCouldNotPublish",!0);a=a.set("broadcastState",j.FINISHED);break;case i.ACCEPT_ERROR_BROADCAST_COULD_NOT_START:a=a.set("broadcastCouldNotStart",!1);break;case i.ERROR_STARTING_API_BROADCAST:b("LiveVideoBroadcastAfterBootloadUtils").showErrorDialog();break;case i.NETWORK_OFFLINE:a=a.set("isOnline",!1);a=a.set("wasEverOffline",!0);break;case i.NETWORK_ONLINE:a=a.set("isOnline",!0);break;case i.SET_SHOW_NUX:a=a.set("showNUX",c.value);break;case i.SETUP_UFI:a.get("broadcastState")===j.LIVE&&(a=a.set("ufiConfig",c.ufiConfig),a=a.set("ufiMarkup",c.ufiMarkup));break;case i.SET_DIALOG:a=a.set("dialog",c.value);break;case i.SET_DIALOG_CONTAINER_ID:a=a.set("dialogContainerID",c.value);break;case i.SET_COMPOSER_CONFIG:a=a.set("composerConfig",c.value);break;case i.SET_DESCRIPTION_EXPANDED:a=a.set("isDescriptionExpanded",c.value);break;case i.INITIALIZE:a=a.set("shouldBeClosed",!1);c.value&&c.value.inputSource!=null&&(a=a.set("inputSource",c.value.inputSource));break;case i.CLEANUP:a=this.getInitialState();a=a.set("warnOnExit",!1);a=a.set("pendingCleanup",!0);a=this.$LiveVideoBroadcastUIStore2(a);break;case i.FINISHED_CLEANUP:a=a.set("pendingCleanup",!1);break;case i.SCHEDULED_LIVE_SUCCESS:c.shouldCloseDialog?(a=this.getInitialState(),a=a.set("warnOnExit",!1),a=this.$LiveVideoBroadcastUIStore2(a,!0)):a=a.set("isScheduledLiveRequestPending",!1);break;case i.PREPARE_BROADCAST_FOR_SCHEDULED_LIVE:case i.SCHEDULED_LIVE_REQUEST:a=a.set("isScheduledLiveRequestPending",!0);break;case i.SCHEDULED_LIVE_FAIL:a=a.set("isScheduledLiveRequestPending",!1);this.$LiveVideoBroadcastUIStore3();break;case i.SET_DESCRIPTION:a=a.set("description",c.value.description);a=a.set("shortDescription",c.value.shortDescription);break;case i.SET_TAG_LIST:a=a.set("tagList",c.value);break;case i.SET_PRIVACY_SELECTOR:a=a.set("privacySelector",c.value);break;case i.SET_PEOPLE_TAGGER_SOURCE:a=a.set("peopleTaggerSource",c.value);break;case i.SET_IS_FUNDRAISER_SELECTED:a=a.set("isFundraiserSelected",c.value);break;case i.SET_TARGET:case i.CLEAR_BROADCAST_ID:a=a.set("allowBroadcastRehearsal",!1);a=a.set("composerPrivacySelector",null);a=a.set("profilePicUri",null);a=a.set("sponsorEnabled",!1);a=a.set("targetingEnabled",!1);a=a.set("canEnableRewind",!1);a=a.set("isRewindEnabled",!1);a=a.set("showJoinGroupCTA",!1);a=this.$LiveVideoBroadcastUIStore4(a,!1);break;case i.UPDATE_UI_CONFIG:c.values.encoders&&(a=a.set("encoders",c.values.encoders));c.values.composerPrivacySelector&&(a=a.set("composerPrivacySelector",c.values.composerPrivacySelector));c.values.shareMode&&(a=a.set("shareMode",c.values.shareMode));c.values.description&&(a=a.set("description",c.values.description));c.values.shortDescription&&(a=a.set("shortDescription",c.values.shortDescription));c.values.showNUX&&(a=a.set("showNUX",c.values.showNUX));c.values.tagList&&(a=a.set("tagList",c.values.tagList));a=a.set("hasCreatedPollRecently",c.values.hasCreatedPollRecently===!0);c.values.privacySelector&&(a=a.set("privacySelector",c.values.privacySelector));c.values.profileLink&&(a=a.set("profileLink",c.values.profileLink));if(c.values.gks){a=a.set("gks",c.values.gks);d=((d=c.values.gks)==null?void 0:d.live_rewind_option_in_composer)===!0;a=a.set("canEnableRewind",d);d&&c.values.isRewindEnabled!=void 0&&(a=a.set("isRewindEnabled",c.values.isRewindEnabled));d=((d=c.values.gks)==null?void 0:d.allow_broadcast_rehearsal)===!0;a=a.set("allowBroadcastRehearsal",d)}c.values.commentModes&&(a=a.set("commentModes",c.values.commentModes));c.values.targetSelectorProps&&(a=a.set("targetSelectorProps",c.values.targetSelectorProps));c.values.profilePicUri&&(a=a.set("profilePicUri",c.values.profilePicUri));c.values.accessToken&&(a=a.set("accessToken",c.values.accessToken));c.values.timezoneString&&(a=a.set("timezoneString",c.values.timezoneString));c.values.cameraEmbedHTML!==void 0&&(a=a.set("cameraEmbedHTML",c.values.cameraEmbedHTML));c.values.targetingEnabled!==void 0&&(a=a.set("targetingEnabled",c.values.targetingEnabled));c.values.fundraiserEnabled!==void 0&&(a=this.$LiveVideoBroadcastUIStore4(a,Boolean(c.values.fundraiserEnabled)));c.values.canSeeDisturbingOptions!==void 0&&(a=a.set("canSeeDisturbingOptions",c.values.canSeeDisturbingOptions));c.values.sponsorEnabled!==void 0&&(a=a.set("sponsorEnabled",c.values.sponsorEnabled));c.values.sponsorConfig&&(a=a.set("sponsorConfig",c.values.sponsorConfig));c.values.showJoinGroupCTA!==void 0&&(a=a.set("showJoinGroupCTA",c.values.showJoinGroupCTA));c.values.canSeeCopyrightOption!==void 0&&(a=a.set("canSeeCopyrightOption",c.values.canSeeCopyrightOption));c.values.rightsManagerVersion!==void 0&&(a=a.set("rightsManagerVersion",c.values.rightsManagerVersion));if(c.values.targetID&&c.values.targetID!==b("LiveVideoBroadcastBroadcastStore").get("targetID")){if(c.values.isShowPage){b("ComposerVideoShowsDispatcher").explicitlyRegisterStore(b("ComposerVideoShowsStore"));d=this.get("composerConfig");var e=d&&d.composerID;e&&b("setTimeout")(function(){return b("ComposerVideoShowsActions").initialize(e,"live_broadcast",!1)},0)}a=a.set("episodeData",null)}if(c.values.episodeData!=void 0){var f=c.values.episodeData;a=a.set("episodeData",f);b("ComposerVideoShowsDispatcher").explicitlyRegisterStore(b("ComposerVideoShowsStore"));d=this.get("composerConfig");var g=d&&d.composerID;g&&b("setTimeout")(function(){b("ComposerVideoShowsActions").initialize(g,"live_broadcast",!0),b("ComposerVideoShowsActions").loadEpisodeData(g,f)},0)}c.values.isShowPage!==void 0&&(a=a.set("isShowPage",c.values.isShowPage));c.values.canEndLiveVideo!=void 0&&(a=a.set("canEndLiveVideo",c.values.canEndLiveVideo));d=c.values.pageLiveCoverVideoData;d&&(a=a.set("isLiveCoverVideoEnabled",d.isLiveCoverVideoEnabled),a=a.set("canEnableLiveCoverVideo",d.canEnableLiveCoverVideo));c.values.hasGamingContext&&(a=a.set("hasGamingContext",c.values.hasGamingContext),a.get("inputSource")===l.API&&(a=a.set("inputSource",l.VIDEO_GAME)));c.values.enableEventTicketPromotion!=null&&(a=a.set("enableEventTicketPromotion",c.values.enableEventTicketPromotion));break;case i.SET_INPUT_SOURCE:a=a.set("inputSource",c.source);break;case i.SET_DIALOG_LOADING:a=a.set("isDialogLoading",c.value);break;case i.SET_EPISODE_DATA:a=a.set("episodeData",c.episodeData);break;case i.SET_HIDE_INPUT_TOGGLE:a=a.set("hideInputToggle",c.hideInputToggle);break;case i.SET_BROADCAST_STATE:a=a.set("broadcastState",c.broadcastState);break;case i.SET_START_TIME:a=a.set("startTime",c.startTime);break;case i.SET_LIVE_COVER_VIDEO_ENABLED:a=a.set("isLiveCoverVideoEnabled",c.value);break;case i.SET_SELECTED_ENCODER_TYPE:a=a.set("selectedEncoderType",c.encoderType);c.encoderType===m.PAIRED_ENCODER&&(a=a.set("selectedRHCTab",n.SETTINGS));break;case i.SET_SELECTED_RHC_TAB:a=a.set("selectedRHCTab",c.selectedTab);break;case i.SET_REWIND_ENABLED:a=a.set("isRewindEnabled",c.enabled);break;case i.SET_SHOW_SAVE_CHANGES_DIALOG:a=a.set("showSaveChangesDialog",c.value);break;case i.SET_COMMENT_MODES:a=a.set("commentModes",c.value);break;case i.ENABLE_WAS_LIVE_POLL_VOTING:a=a.set("enableWasLivePollVoting",c.enabled);break;case i.SET_SHOW_WAS_LIVE_VOTING_TOGGLE:a=a.set("canSeeWasLiveVotingToggle",c.shouldShow);break;case i.CHANGE_VIDEO_POLL_WWW_PLACEMENT:a=a.set("videoPollWWWPlacement",c.placement);break;case i.SET_COMMENTATING_DISABLED:a=a.set("isCommentatingDisabled",c.value);break;case i.SET_ISR_ENABLED:a=a.set("isIsrEnabled",c.value);break;case i.SET_BROADCAST_PLAYBACK_MODE:a=a.set("broadcastPlaybackMode",c.value);break;case i.SET_ENABLE_EVENT_TICKET_PROMOTION:a=a.set("enableEventTicketPromotion",c.value);break;case i.HIDE_WARNING_ON_EXIT:a=a.set("warnOnExit",!1);break;default:break}return a};d.$LiveVideoBroadcastUIStore3=function(){b("ErrorDialog").show(g._("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e01\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e1e"),g._("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e01\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e01\u0e33\u0e2b\u0e19\u0e14\u0e40\u0e27\u0e25\u0e32\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e23\u0e48\u0e20\u0e32\u0e1e \u0e42\u0e1b\u0e23\u0e14\u0e25\u0e2d\u0e07\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07"))};d.$LiveVideoBroadcastUIStore5=function(){var a=this.get("composerConfig");a=a&&a.composerID;a&&(b("ReactComposerTaggerActions").setTaggerData(a,b("ReactComposerLoggingName").FUNDRAISER_SPROUT,b("ReactComposerTaggerType").FUNDRAISER,{}),b("ReactComposerFundraiserAttachmentActions").setMarkup(a,null))};d.$LiveVideoBroadcastUIStore4=function(a,b){a=a.set("fundraiserEnabled",b);b||this.$LiveVideoBroadcastUIStore5();return a};d.$LiveVideoBroadcastUIStore2=function(a,c){__p&&__p();var d=this.get("dialog");if(d){var e=b("ge")(this.get("dialogContainerID"));e&&b("ReactDOM").unmountComponentAtNode(e);d.destroy();a=a.set("pendingCleanup",!1)}else window.close();e=this.get("composerConfig");d=this.get("broadcastState");e=e&&e.composerID;e&&(c||d!==j.PREVIEW&&d!==j.READY_TO_LIVE?b("ReactComposerActions").reset(e):b("ReactComposerAttachmentActions").selectAttachment(e,b("ReactComposerAttachmentType").STATUS));return a};d.$LiveVideoBroadcastUIStore1=function(a){if(b("gkx")("1176856")){var c=this.get("composerConfig");c=c&&c.composerID;c&&b("ReactComposerActions").postSucceeded(c)}return a};return c}(b("FluxMapStore"));c.__moduleID=e.id;e.exports=new c(b("LiveVideoBroadcastDispatcher"))}),null);